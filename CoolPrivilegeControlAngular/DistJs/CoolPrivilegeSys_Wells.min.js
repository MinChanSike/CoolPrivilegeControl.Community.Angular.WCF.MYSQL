/*! Cool Privilege Control System - v0.0.0 - Author:Wells 2016-03-28 */!function(){"use strict";angular.module("WCFClient",["ui.router"]),angular.module("CoolPrivilegeModel",[]),angular.module("commonUtilities",["ngCookies","ui.router","WCFClient","CoolPrivilegeModel"]),angular.module("ValidationModule",["ngCookies"]),angular.module("MainModule",["ui.router","ngSanitize","ngAnimate","ngStorage","commonUtilities","CoolPrivilegeModel","ngCookies"]),angular.module("LoginModule",["ui.router","ngAnimate","ngResource","ngCookies","ngStorage","commonUtilities","ValidationModule","WCFClient","CoolPrivilegeModel"]);var a=angular.module("CoolPrivilegeControl",["ui.router","ngCookies","ngStorage","commonUtilities","MainModule","LoginModule","WCFClient","CoolPrivilegeModel"]),b=["$stateProvider","$urlRouterProvider","$locationProvider"],c=function(a,b,c){c.html5Mode(!0).hashPrefix("!"),b.otherwise("/"),a.state("CPCS",{url:"/",resolve:{Setup:["$q","$state","$location","$cookies","StaticContentModel","SystemInfoVM","WCFAuthInfoVM","SystemInfoRestfulSer","$sessionStorage",function(a,b,c,d,e,f,g,h,i){var j=a.defer(),k=new function(){var b=a.defer();return h.GetMultiLingualResSer(defaultLangKey).then(function(a){var c=angular.fromJson(a.data);null!=c&&void 0!=c&&(i.MultiLingualRes=c,i.SelectedLang=defaultLangKey),b.resolve()}),b.promise},l=new function(){var b=(new e,a.defer());return h.GetSystemInfo(new g).then(function(a){var c=new f(a.data);angular.isUndefined(c)||null==c||d.putObject(Keys.SystemInfo_CookiesKey,c),b.resolve()}),b.promise};return a.all([k,l]).then(function(){j.resolve(),b.go("LoginModule.Login")}),j.promise}]},controller:"GlobalController"}).state("Error",{url:"/Error","abstract":!0}).state("Error.AccessDenied",{url:"/AccessDenied",views:{"@":{templateUrl:Path.ErrorPath+"AccessDenied.tpl.html",controller:"ErrorController"}}}).state("Error.SessionTimeout",{url:"/SessionTimeout",views:{"@":{templateUrl:Path.ErrorPath+"SessionTimeout.tpl.html",controller:"ErrorController"}}}).state("Error.PageNotFound",{url:"/PageNotFound",views:{"@":{templateUrl:Path.ErrorPath+"PageNotFound.tpl.html",controller:"ErrorController"}}}).state("Error.Exception",{url:"/Exception",views:{"@":{templateUrl:Path.ErrorPath+"Exception.tpl.html",controller:"ErrorController"}}}).state("Error.RestServiceError",{url:"/RestServiceError",views:{"@":{templateUrl:Path.ErrorPath+"RestServiceError.tpl.html",controller:"ErrorController"}}})};c.$inject=b,a.config(c),a.run(["$rootScope","$state","$stateParams","$log","$sessionStorage","MsgBoxModel",function(a,b,c,d,e,f){a.$state=b,a.$stateParams=c,a.$on(ExceptionType.SessionTimeout,function(a,c){angular.isUndefined(e.SessionTimeoutInfo)||null==e.SessionTimeoutInfo||delete e.SessionTimeoutInfo,e.SessionTimeoutInfo=c,b.go("Error.SessionTimeout"),a.preventDefault()}),a.$on(ExceptionType.AccessDenied,function(c,d){angular.isUndefined(e.AccessDeniedInfo)||null==e.AccessDeniedInfo||delete e.AccessDeniedInfo,e.AccessDeniedInfo=d;a.$state;b.go("Error.AccessDenied"),c.preventDefault()}),a.$on(ExceptionType.ValidationError,function(a,b){var c=new f;c.ShowMsg(BootstrapDialog.TYPE_DANGER,b.PageTitle||"",b.Msgs||""),a.preventDefault()}),a.$on(ExceptionType.RestServiceError,function(c,d){angular.isUndefined(e.RestServiceErrorInfo)||null==e.RestServiceErrorInfo||delete e.RestServiceErrorInfo,e.RestServiceErrorInfo=d;a.$state;b.go("Error.RestServiceError"),c.preventDefault()}),a.$on(ExceptionType.Others,function(c,d){angular.isUndefined(e.ExceptionInfo)||null==e.ExceptionInfo||delete e.ExceptionInfo,e.ExceptionInfo=d;a.$state;b.go("Error.Exception"),c.preventDefault()}),a.$on(ExceptionType.PageNotFound,function(c,d){angular.isUndefined(e.PageNotFoundInfo)||null==e.PageNotFoundInfo||delete e.PageNotFoundInfo,e.PageNotFoundInfo=d;a.$state;b.go("Error.SessionTimeout"),c.preventDefault()})}])}(),function(){"use strict";var a=["CustomStateProvider"],b=function(a){a.AddState(Path.FunsPath,"AuditLogManage","",{initData:["WCFAuthInfoVM","AuditLogMgtSerClient",function(a,b){var c=new a;return c.initData(),b.GetEmptyAuditLogVM(c)}]})};b.$inject=a,angular.module("MainModule").config(b);var c=["$scope","$document","$q","$stateParams","$location","$sessionStorage","$state","WCFAuthInfoVM","ClientSessionMgt","AuditLogMgtSerClient","WCFReturnResult","MsgBoxModel"],d=function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a,b){var d=c.defer(),e=new h;return e.initData(),e.SetFunKeyAndTypeKey("AuditLogManage",b),a.entity_WCFAuthInfoVM=e,j.GetListWithPaging(a).then(function(a){d.resolve(a)},function(a){d.reject(a)}),d.promise}function n(){angular.isUndefined(f.MultiLingualRes)||null==f.MultiLingualRes||(a.Captions={SearchCriteria:f.MultiLingualRes.SearchCriteria,List:f.MultiLingualRes.List,Operation:f.MultiLingualRes.Operation,Search:f.MultiLingualRes.Search,OperationType:f.MultiLingualRes.OperationType,Date:f.MultiLingualRes.Date,From:f.MultiLingualRes.From,To:f.MultiLingualRes.To,Operator:f.MultiLingualRes.Operator,TableName:f.MultiLingualRes.TableName,OriginalValue:f.MultiLingualRes.OriginalValue,NewValue:f.MultiLingualRes.NewValue,RecordKey:f.MultiLingualRes.RecordKey,Key:f.MultiLingualRes.Key,Value:f.MultiLingualRes.Value,All:f.MultiLingualRes.All,Create:f.MultiLingualRes.Create,Edit:f.MultiLingualRes.Edit,Delete:f.MultiLingualRes.Delete,ClickToViewDetails:f.MultiLingualRes.ClickToViewDetails,BacktoList:f.MultiLingualRes.BacktoList,E019:f.MultiLingualRes.E019},p=f.MultiLingualRes.AuditLogManage,angular.element(window.document)[0].title=p);var b=new i;b.PageTitle=p;var d=b.GetSystemInfo();a.SystemInfo=d,a.DateTimeFormat=a.SystemInfo.DateFormat+" "+a.SystemInfo.TimeFormat;var g=new h;g.initData(),a.DisplayPageNum=a.SystemInfo.DisplayPageNum,a.PageSize=a.SystemInfo.PageSize,a.Sort=a.Sort||"",a.SortDir=a.SortDir||"",a.reverse="desc"==a.SortDir;var l=new k(j.GetEmptyAuditLogVM_Result()),n=l.GetErrMsgs();if($("#DateFromDiv").datetimepicker({format:a.SystemInfo.DateFormat.toUpperCase()}),$("#DateToDiv").datetimepicker({format:a.SystemInfo.DateFormat.toUpperCase()}),l.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,e.path(),p,n);a.EntityAuditLog=l.Entity_AuditLogVM,a.Sort=a.Sort||a.EntityAuditLog.DefaultSortColumn,a.SortDir=a.SortDir||a.EntityAuditLog.DefaultSortDir,a.reverse="desc"==a.SortDir;var o={entity_WCFAuthInfoVM:g,entity_SearchCriteria:a.EntityAuditLog,int_CurrentPage:1,int_PageSize:a.SystemInfo.PageSize,str_SortColumn:a.Sort,str_SortDir:a.SortDir,str_CustomFilter:""},q=m(o,"View");c.all([q]).then(function(b){var c=new k(b[0].data);c.GetErrMsgs();if(c.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,e.path(),p,result.GetErrMsgs());for(var d=0;d<c.EntityList_AuditLogVM.length;++d)angular.isUndefined(c.EntityList_AuditLogVM[d].AL_CreateDate)||null==c.EntityList_AuditLogVM[d].AL_CreateDate||(c.EntityList_AuditLogVM[d].AL_CreateDate=moment(c.EntityList_AuditLogVM[d].AL_CreateDate).toDate());a.EntityList_AuditLogVM=c.EntityList_AuditLogVM,a.AuditLogList=a.EntityList_AuditLogVM,a.CurrPageIndex=1,a.TotalCount=c.Int_TotalRecordCount},function(a){var b=new WCFErrorContract(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,e.path(),p,b.StrMsg,b.StrTraceMsg)})}function o(b,c){var d=new Array,e=c.split(";");d.push('<table class="table table-bordered table-condensed" style="table-layout:fixed;" contenteditable="false">'),d.push("<thead>"),d.push("<tr>"),d.push('<th align="center" style="text-align:center;" width="100px" class="info">'+a.Captions.Key+"</th>"),d.push('<th align="center" style="text-align:center;" width="250px" class="info">'+a.Captions.Value+"</th>"),d.push("</tr>"),d.push("</thead>"),d.push("<tbody>");for(var f=0;f<e.length;++f){d.push("<tr>");var g=e[f].split("=");if(g.length>=2)for(var h=0;2>h;++h){if(0==h)d.push('<td align="left" class="wordwrap" width="100px">'),d.push(g[h]);else{d.push('<td align="left" class="wordwrap" width="250px">');var i=new Array;if(g.length>2)for(var j=h;j<g.length;++j)i.push(g[j]);else i.push(g[h]);d.push(i.join("="))}d.push("</td>")}d.push("</tr>")}d.push("</tbody>"),d.push("</table>");var k=new l;k.ShowMsg(BootstrapDialog.TYPE_INFO,b,d.join(""))}var p="";n(),a.Search=function(){var d=new h;d.initData();var f=b[0].SearchForm.elements.DateFrom.value,g=b[0].SearchForm.elements.DateTo.value;""!=f&&(a.EntityAuditLog.DateFrom="/Date("+moment(f,a.SystemInfo.DateFormat.toUpperCase()).format("x")+")/"),""!=g&&(a.EntityAuditLog.DateTo="/Date("+moment(g,a.SystemInfo.DateFormat.toUpperCase()).format("x")+")/");var i={entity_WCFAuthInfoVM:d,entity_SearchCriteria:a.EntityAuditLog,int_CurrentPage:1,int_PageSize:a.SystemInfo.PageSize,str_SortColumn:a.Sort,str_SortDir:a.SortDir,str_CustomFilter:""},j=m(i,"Search");c.all([j]).then(function(b){var c=new k(b[0].data);c.GetErrMsgs();if(c.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,e.path(),p,result.GetErrMsgs());for(var d=0;d<c.EntityList_AuditLogVM.length;++d)angular.isUndefined(c.EntityList_AuditLogVM[d].AL_CreateDate)||null==c.EntityList_AuditLogVM[d].AL_CreateDate||(c.EntityList_AuditLogVM[d].AL_CreateDate=moment(c.EntityList_AuditLogVM[d].AL_CreateDate).toDate());a.EntityList_AuditLogVM=c.EntityList_AuditLogVM,a.AuditLogList=a.EntityList_AuditLogVM,a.CurrPageIndex=1,a.TotalCount=c.Int_TotalRecordCount},function(a){var b=new WCFErrorContract(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,e.path(),p,b.StrMsg,b.StrTraceMsg)})},a.SortBy=function(b){a.reverse=!0,a.Sort==b?a.SortDir="desc"==a.SortDir?"asc":"desc":(a.Sort=b,a.SortDir="asc");var d=new h;d.initData();var f={entity_WCFAuthInfoVM:d,entity_SearchCriteria:a.EntityAuditLog,int_CurrentPage:a.CurrPageIndex,int_PageSize:a.SystemInfo.PageSize,str_SortColumn:a.Sort,str_SortDir:a.SortDir,str_CustomFilter:""},g=m(f,"View");c.all([g]).then(function(b){var c=new k(b[0].data);c.GetErrMsgs();if(c.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,e.path(),p,result.GetErrMsgs());for(var d=0;d<c.EntityList_AuditLogVM.length;++d)angular.isUndefined(c.EntityList_AuditLogVM[d].AL_CreateDate)||null==c.EntityList_AuditLogVM[d].AL_CreateDate||(c.EntityList_AuditLogVM[d].AL_CreateDate=moment(c.EntityList_AuditLogVM[d].AL_CreateDate).toDate());a.EntityList_AuditLogVM=c.EntityList_AuditLogVM,a.AuditLogList=a.EntityList_AuditLogVM,a.TotalCount=c.Int_TotalRecordCount},function(a){var b=new WCFErrorContract(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,e.path(),p,b.StrMsg,b.StrTraceMsg)})},a.PageIndexChange=function(b){var d=new h;d.initData();var f={entity_WCFAuthInfoVM:d,entity_SearchCriteria:a.EntityAuditLog,int_CurrentPage:b,int_PageSize:a.SystemInfo.PageSize,str_SortColumn:a.Sort,str_SortDir:a.SortDir,str_CustomFilter:""},g=m(f,"View");c.all([g]).then(function(c){var d=new k(c[0].data);d.GetErrMsgs();if(d.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,e.path(),p,result.GetErrMsgs());for(var f=0;f<d.EntityList_AuditLogVM.length;++f)angular.isUndefined(d.EntityList_AuditLogVM[f].AL_CreateDate)||null==d.EntityList_AuditLogVM[f].AL_CreateDate||(d.EntityList_AuditLogVM[f].AL_CreateDate=moment(d.EntityList_AuditLogVM[f].AL_CreateDate).toDate());a.EntityList_AuditLogVM=d.EntityList_AuditLogVM,a.AuditLogList=a.EntityList_AuditLogVM,a.CurrPageIndex=b,a.TotalCount=d.Int_TotalRecordCount},function(a){var b=new WCFErrorContract(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,e.path(),p,b.StrMsg,b.StrTraceMsg)})},a.ClickToViewOrgValue=function(b){o(a.Captions.OriginalValue,b)},a.ClickToViewNewValue=function(b){o(a.Captions.NewValue,b)}};d.$inject=c,angular.module("MainModule").controller("AuditLogManageController",d)}(),function(){"use strict";var a=["CustomStateProvider"],b=function(a){a.AddState(Path.FunsPath,"AuthorizedHistoryManage","",{initData:["WCFAuthInfoVM","AuthHisSerClient",function(a,b){var c=new a;return c.initData(),b.GetEmptyAuthHisVM(c)}]})};b.$inject=a,angular.module("MainModule").config(b);var c=["$scope","$q","$stateParams","$location","$sessionStorage","$state","WCFAuthInfoVM","ClientSessionMgt","AuthHisSerClient","WCFReturnResult","MsgBoxModel"],d=function(a,b,c,d,e,f,g,h,i,j,k){function l(a,c){var d=b.defer(),e=new g;return e.initData(),e.SetFunKeyAndTypeKey("AuthorizedHistoryManage",c),a.entity_WCFAuthInfoVM=e,i.GetListWithPaging(a).then(function(a){d.resolve(a)},function(a){d.reject(a)}),d.promise}function m(){angular.isUndefined(e.MultiLingualRes)||null==e.MultiLingualRes||(a.Captions={SearchCriteria:e.MultiLingualRes.SearchCriteria,List:e.MultiLingualRes.List,Operation:e.MultiLingualRes.Operation,Search:e.MultiLingualRes.Search,LoginName:e.MultiLingualRes.LoginName,OperationType:e.MultiLingualRes.OperationType,Datetime:e.MultiLingualRes.Datetime,All:e.MultiLingualRes.All,Login:e.MultiLingualRes.Login,Logout:e.MultiLingualRes.Logout,Delete:e.MultiLingualRes.Delete,BacktoList:e.MultiLingualRes.BacktoList,E019:e.MultiLingualRes.E019},n=e.MultiLingualRes.AuthorizedHistoryManage,angular.element(window.document)[0].title=n);var c=new h;c.PageTitle=n;var f=c.GetSystemInfo();a.SystemInfo=f,a.DateTimeFormat=a.SystemInfo.DateFormat+" "+a.SystemInfo.TimeFormat;var k=new g;k.initData(),a.DisplayPageNum=a.SystemInfo.DisplayPageNum,a.PageSize=a.SystemInfo.PageSize,a.Sort=a.Sort||"",a.SortDir=a.SortDir||"",a.reverse="desc"==a.SortDir;var m=new j(i.GetEmptyAuthHisVM_Result()),o=m.GetErrMsgs();if(m.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,d.path(),n,o);a.EntityAuthHis=m.Entity_AuthHisVM,a.Sort=a.Sort||a.EntityAuthHis.DefaultSortColumn,a.SortDir=a.SortDir||a.EntityAuthHis.DefaultSortDir,a.reverse="desc"==a.SortDir;var p={entity_WCFAuthInfoVM:k,entity_SearchCriteria:a.EntityAuthHis,int_CurrentPage:1,int_PageSize:a.SystemInfo.PageSize,str_SortColumn:a.Sort,str_SortDir:a.SortDir,str_CustomFilter:""},q=l(p,"View");b.all([q]).then(function(b){var c=new j(b[0].data);c.GetErrMsgs();if(c.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,d.path(),n,result.GetErrMsgs());for(var e=0;e<c.EntityList_AuthorizedHistoryVM.length;++e)angular.isUndefined(c.EntityList_AuthorizedHistoryVM[e].OperationDatetime)||null==c.EntityList_AuthorizedHistoryVM[e].OperationDatetime||(c.EntityList_AuthorizedHistoryVM[e].OperationDatetime=moment(c.EntityList_AuthorizedHistoryVM[e].OperationDatetime).toDate());a.EntityList_AuthorizedHistoryVM=c.EntityList_AuthorizedHistoryVM,a.AuthHisList=a.EntityList_AuthorizedHistoryVM,a.CurrPageIndex=1,a.TotalCount=c.Int_TotalRecordCount},function(a){var b=new WCFErrorContract(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,d.path(),n,b.StrMsg,b.StrTraceMsg)})}var n="";m(),a.Search=function(){var c=new g;c.initData();var e={entity_WCFAuthInfoVM:c,entity_SearchCriteria:a.EntityAuthHis,int_CurrentPage:1,int_PageSize:a.SystemInfo.PageSize,str_SortColumn:a.Sort,str_SortDir:a.SortDir,str_CustomFilter:""},f=l(e,"Search");b.all([f]).then(function(b){var c=new j(b[0].data);c.GetErrMsgs();if(c.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,d.path(),n,result.GetErrMsgs());for(var e=0;e<c.EntityList_AuthorizedHistoryVM.length;++e)angular.isUndefined(c.EntityList_AuthorizedHistoryVM[e].OperationDatetime)||null==c.EntityList_AuthorizedHistoryVM[e].OperationDatetime||(c.EntityList_AuthorizedHistoryVM[e].OperationDatetime=moment(c.EntityList_AuthorizedHistoryVM[e].OperationDatetime).toDate());a.EntityList_AuthorizedHistoryVM=c.EntityList_AuthorizedHistoryVM,a.AuthHisList=a.EntityList_AuthorizedHistoryVM,a.CurrPageIndex=1,a.TotalCount=c.Int_TotalRecordCount},function(a){var b=new WCFErrorContract(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,d.path(),n,b.StrMsg,b.StrTraceMsg)})},a.SortBy=function(c){a.reverse=!0,a.Sort==c?a.SortDir="desc"==a.SortDir?"asc":"desc":(a.Sort=c,a.SortDir="asc");var e=new g;e.initData();var f={entity_WCFAuthInfoVM:e,entity_SearchCriteria:a.EntityAuthHis,int_CurrentPage:a.CurrPageIndex,int_PageSize:a.SystemInfo.PageSize,str_SortColumn:a.Sort,str_SortDir:a.SortDir,str_CustomFilter:""},h=l(f,"View");b.all([h]).then(function(b){var c=new j(b[0].data);c.GetErrMsgs();if(c.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,d.path(),n,result.GetErrMsgs());for(var e=0;e<c.EntityList_AuthorizedHistoryVM.length;++e)angular.isUndefined(c.EntityList_AuthorizedHistoryVM[e].OperationDatetime)||null==c.EntityList_AuthorizedHistoryVM[e].OperationDatetime||(c.EntityList_AuthorizedHistoryVM[e].OperationDatetime=moment(c.EntityList_AuthorizedHistoryVM[e].OperationDatetime).toDate());a.EntityList_AuthorizedHistoryVM=c.EntityList_AuthorizedHistoryVM,a.AuthHisList=a.EntityList_AuthorizedHistoryVM,a.TotalCount=c.Int_TotalRecordCount},function(a){var b=new WCFErrorContract(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,d.path(),n,b.StrMsg,b.StrTraceMsg)})},a.PageIndexChange=function(c){var e=new g;e.initData();var f={entity_WCFAuthInfoVM:e,entity_SearchCriteria:a.EntityAuthHis,int_CurrentPage:c,int_PageSize:a.SystemInfo.PageSize,str_SortColumn:a.Sort,str_SortDir:a.SortDir,str_CustomFilter:""},h=l(f,"View");b.all([h]).then(function(b){var e=new j(b[0].data);e.GetErrMsgs();if(e.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,d.path(),n,result.GetErrMsgs());for(var f=0;f<e.EntityList_AuthorizedHistoryVM.length;++f)angular.isUndefined(e.EntityList_AuthorizedHistoryVM[f].OperationDatetime)||null==e.EntityList_AuthorizedHistoryVM[f].OperationDatetime||(e.EntityList_AuthorizedHistoryVM[f].OperationDatetime=moment(e.EntityList_AuthorizedHistoryVM[f].OperationDatetime).toDate());a.EntityList_AuthorizedHistoryVM=e.EntityList_AuthorizedHistoryVM,a.AuthHisList=a.EntityList_AuthorizedHistoryVM,a.CurrPageIndex=c,a.TotalCount=e.Int_TotalRecordCount},function(a){var b=new WCFErrorContract(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,d.path(),n,b.StrMsg,b.StrTraceMsg)})},a.Delete=function(a){var b=new k;b.OpenLoadingDialog();var c=new g;c.initData(),c.SetFunKeyAndTypeKey("AuthorizedHistoryManage","Delete");var h={entity_WCFAuthInfoVM:c,str_AuthHisID:a};i.Delete(h).then(function(a){if(!angular.isUndefined(a)&&null!=a){var c=new j(a.data);if(c.HasError())throw b.CloseLoadingDialog(),new ExcetionInst(ExceptionType.ValidationError,d.path(),n,c.GetErrMsgs());f.reload(),b.ShowMsg(BootstrapDialog.TYPE_SUCCESS,n||"",e.MultiLingualRes.I001||""),b.CloseLoadingDialog()}},function(a){var b=new WCFErrorContract(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,d.path(),n,b.StrMsg,b.StrTraceMsg)})}};d.$inject=c,angular.module("MainModule").controller("AuthorizedHistoryManageController",d)}(),function(){"use strict";var a=["$scope","$state","$sessionStorage"],b=function(a,b,c){a.ExceptionMsg=c.ExceptionInfo,a.SessionTimeout=c.SessionTimeoutInfo,a.PageNotFound=c.PageNotFoundInfo,a.RestServiceError=c.RestServiceErrorInfo,a.AccessDenied=c.AccessDeniedInfo,a.GoToLoginPage=function(){angular.isUndefined(c.ExceptionInfo)&&delete c.ExceptionInfo,angular.isUndefined(c.PageNotFoundInfo)&&delete c.PageNotFoundInfo,angular.isUndefined(c.SessionTimeoutInfo)&&delete c.SessionTimeoutInfo,angular.isUndefined(c.RestServiceErrorInfo)&&delete c.RestServiceErrorInfo,b.go("CPCS")}};b.$inject=a,angular.module("CoolPrivilegeControl").controller("ErrorController",b)}(),function(){"use strict";var a=["CustomStateProvider"],b=function(a){a.AddState(Path.FunsPath,"FManage","",{initData:["WCFAuthInfoVM","FunMgtSerClient",function(a,b){var c=new a;return c.initData(),b.GetEmptyFVM(c)}]}),a.AddState(Path.FunsPath,"FManage","Edit",{initData:["$stateParams","WCFAuthInfoVM","FunMgtSerClient",function(a,b,c){var d=new b;d.initData(),d.SetFunKeyAndTypeKey("FManage","Edit");var e={entity_WCFAuthInfoVM:d,str_FunID:a.FID};return c.GetEntityByID(e)}],initData_FunType:["WCFAuthInfoVM","FunTypeMgtSerClient",function(a,b){var c=new a;return c.initData(),b.GetAllFunType(c)}]},"/:FID"),a.AddState(Path.FunsPath,"FManage","Create",{initData:["WCFAuthInfoVM","FunTypeMgtSerClient",function(a,b){var c=new a;return c.initData(),b.GetEmptyFVM(c)}],initData_FunType:["WCFAuthInfoVM","FunTypeMgtSerClient",function(a,b){var c=new a;return c.initData(),b.GetAllFunType(c)}]})};b.$inject=a,angular.module("MainModule").config(b);var c=["$scope","$q","$filter","$stateParams","$location","$sessionStorage","$state","WCFAuthInfoVM","ClientSessionMgt","FunMgtSerClient","FunTypeMgtSerClient","CheckPrivilegeSerClient","WCFReturnResult","MsgBoxModel"],d=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(a,c){var d=b.defer(),e=new h;return e.initData(),e.SetFunKeyAndTypeKey("FManage",c),a.entity_WCFAuthInfoVM=e,j.GetListWithPaging(a).then(function(a){d.resolve(a)},function(a){d.reject(a)}),d.promise}function p(){angular.isUndefined(f.MultiLingualRes)||null==f.MultiLingualRes||(a.Captions={SearchCriteria:f.MultiLingualRes.SearchCriteria,List:f.MultiLingualRes.List,FManage_Create:f.MultiLingualRes.FManage_Create,Operation:f.MultiLingualRes.Operation,Delete:f.MultiLingualRes.Delete,Edit:f.MultiLingualRes.Edit,Search:f.MultiLingualRes.Search,Save:f.MultiLingualRes.Save,FunctionPath:f.MultiLingualRes.FunctionPath,FunctionKey:f.MultiLingualRes.FunctionKey,FunctionName:f.MultiLingualRes.FunctionName,FunctionUrl:f.MultiLingualRes.FunctionUrl,FunctionType:f.MultiLingualRes.FunctionType,BacktoList:f.MultiLingualRes.BacktoList,E019:f.MultiLingualRes.E019,I002:f.MultiLingualRes.I002},s=g.includes("Main.FManage.Edit")?f.MultiLingualRes.FManage_Edit:g.includes("Main.FManage.Create")?f.MultiLingualRes.FManage_Create:f.MultiLingualRes.FManage,angular.element(window.document)[0].title=s);var c=new i;c.PageTitle=s;var n=c.GetSystemInfo();a.SystemInfo=n;var p=new h;if(p.initData(),g.includes("Main.FManage.Edit")){a.EditId=d.FID;var t=j.GetEntityByID_Result();if(!angular.isUndefined(t)&&null!=t){var u=new m(t),v=u.GetErrMsgs();if(u.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,e.path(),s,v);a.EntityF=u.Entity_FunctionVM,a.SelectedTypeList=[],k.GetAllFunType_Result().length>0&&angular.forEach(k.GetAllFunType_Result(),function(b,c){angular.forEach(a.EntityF.SelectedTypeList,function(a,c){a.ID==b.ID&&(b.Selected=a.Selected)});var d={ID:b.ID,FunctionType:b.FunctionType,Selected:b.Selected};a.SelectedTypeList.push(d)})}}else if(g.includes("Main.FManage.Create")){var u=new m(j.GetEmptyFVM_Result()),v=u.GetErrMsgs();if(u.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,e.path(),s,v);a.EntityF=u.Entity_FunctionVM,a.SelectedTypeList=[],k.GetAllFunType_Result().length>0&&angular.forEach(k.GetAllFunType_Result(),function(b,c){var d={ID:b.ID,FunctionType:b.FunctionType,Selected:b.Selected};a.SelectedTypeList.push(d)})}else{a.DisplayPageNum=a.SystemInfo.DisplayPageNum,a.PageSize=a.SystemInfo.PageSize,a.Sort=a.Sort||"",a.SortDir=a.SortDir||"",a.reverse="desc"==a.SortDir;var u=new m(j.GetEmptyFVM_Result()),v=u.GetErrMsgs();if(u.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,e.path(),s,v);a.EntityF=u.Entity_FunctionVM,a.Sort=a.Sort||a.EntityF.DefaultSortColumn,a.SortDir=a.SortDir||a.EntityF.DefaultSortDir,a.reverse="desc"==a.SortDir;var w={entity_WCFAuthInfoVM:void 0,entity_SearchCriteria:null,int_CurrentPage:1,int_PageSize:2147483647,str_SortColumn:"",str_SortDir:"",str_CustomFilter:""},x=o(w,"View"),p=new h;p.initData(),p.SetFunKeyAndTypeKey("FManage","Create");var y={entity_WCFAuthInfoVM:p,isCheckFunType:!0},z=l.CheckPrivilege(y);b.all([x,z]).then(function(b){var c=new m(b[0].data),d=b[1].data;a.CheckPrivilege_Create=d;c.GetErrMsgs();if(c.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,e.path(),s,result.GetErrMsgs());a.EntityList_FunctionVM=c.EntityList_FunctionVM,a.FunList=q(a.EntityList_FunctionVM,a.Sort,a.reverse),a.FunList=r(a.FunList,{FunctionPath:a.EntityF.FunctionPath}),a.FunList=r(a.FunList,{FunctionKey:a.EntityF.FunctionKey}),a.FunList=r(a.FunList,{FunctionName:a.EntityF.FunctionName}),a.CurrPageIndex=1,a.TotalCount=a.FunList.length,a.FunList=a.FunList.slice(a.PageSize*(a.CurrPageIndex-1),a.PageSize*a.CurrPageIndex)},function(a){var b=new WCFErrorContract(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,e.path(),s,b.StrMsg,b.StrTraceMsg)})}}var q=c("orderBy"),r=c("filter"),s="";p(),a.CheckAll=function(){angular.forEach(a.SelectedTypeList,function(b,c){a.isCheckAll?b.Selected=!0:b.Selected=!1})},a.CheckFunType=function(){var b=!0;angular.forEach(a.SelectedTypeList,function(a,c){return a?void 0:void(b=!1)}),scope.isCheckAll=b},a.Search=function(){a.EntityList_FunctionVM.length>0&&(a.FunList=q(a.EntityList_FunctionVM,a.Sort,a.reverse),a.FunList=r(a.FunList,{FunctionPath:a.EntityF.FunctionPath}),a.FunList=r(a.FunList,{FunctionKey:a.EntityF.FunctionKey}),a.FunList=r(a.FunList,{FunctionName:a.EntityF.FunctionName}),a.CurrPageIndex=1,a.TotalCount=a.FunList.length,a.FunList=a.FunList.slice(a.PageSize*(a.CurrPageIndex-1),a.PageSize*a.CurrPageIndex))},a.Delete=function(a){s=f.MultiLingualRes.FManage_Delete;var b=new n;b.OpenLoadingDialog();var c=new h;c.initData(),c.SetFunKeyAndTypeKey("FManage","Delete");var d={entity_WCFAuthInfoVM:c,str_FunID:a};j.Delete(d).then(function(a){if(!angular.isUndefined(a)&&null!=a){var c=new m(a.data);if(c.HasError())throw b.CloseLoadingDialog(),new ExcetionInst(ExceptionType.ValidationError,e.path(),s,c.GetErrMsgs());g.includes("Main.FManage.Edit")?g.go("Main.FManage",{},{reload:!0}):g.reload(),b.ShowMsg(BootstrapDialog.TYPE_SUCCESS,s||"",f.MultiLingualRes.I001||""),b.CloseLoadingDialog()}},function(a){var b=new WCFErrorContract(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,e.path(),s,b.StrMsg,b.StrTraceMsg)})},a.Edit=function(){var b=new n;b.OpenLoadingDialog();var c=new h;c.initData(),c.SetFunKeyAndTypeKey("FManage","Edit"),a.EntityF.SelectedTypeList=a.SelectedTypeList;var d={entity_WCFAuthInfoVM:c,entity_FunVM:a.EntityF};j.Update(d).then(function(a){if(!angular.isUndefined(a)&&null!=a){var c=new m(a.data),d=c.GetErrMsgs();if(c.HasMsgs())throw b.CloseLoadingDialog(),new ExcetionInst(ExceptionType.ValidationError,e.path(),s,d);g.reload(),b.ShowMsg(BootstrapDialog.TYPE_SUCCESS,s||"",f.MultiLingualRes.I000||""),b.CloseLoadingDialog()}},function(a){var b=new WCFErrorContract(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,e.path(),s,b.StrMsg,b.StrTraceMsg)})},a.Create=function(){var b=new n;b.OpenLoadingDialog();var c=new h;c.initData(),c.SetFunKeyAndTypeKey("FManage","Create"),a.EntityF.SelectedTypeList=a.SelectedTypeList;var d={entity_WCFAuthInfoVM:c,entity_FunVM:a.EntityF};j.Create(d).then(function(a){if(!angular.isUndefined(a)&&null!=a){var c=new m(a.data),d=c.GetErrMsgs();if(c.HasMsgs())throw b.CloseLoadingDialog(),new ExcetionInst(ExceptionType.ValidationError,e.path(),s,d);g.go("Main.FManage",{},{reload:!0}),b.ShowMsg(BootstrapDialog.TYPE_SUCCESS,s||"",f.MultiLingualRes.I000||""),b.CloseLoadingDialog()}},function(a){var b=new WCFErrorContract(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,e.path(),s,b.StrMsg,b.StrTraceMsg)})},a.SortBy=function(b){a.reverse=!0,a.Sort==b?(a.SortDir="desc"==a.SortDir?"asc":"desc",a.reverse="desc"==a.SortDir):(a.Sort=b,a.SortDir="asc",a.reverse=!1),a.EntityList_FunctionVM.length>0&&(a.FunList=q(a.EntityList_FunctionVM,a.Sort,a.reverse),a.FunList=r(a.FunList,{FunctionPath:a.EntityF.FunctionPath}),a.FunList=r(a.FunList,{FunctionKey:a.EntityF.FunctionKey}),a.FunList=r(a.FunList,{FunctionName:a.EntityF.FunctionName}),a.TotalCount=a.FunList.length,a.FunList=a.FunList.slice(a.PageSize*(a.CurrPageIndex-1),a.PageSize*a.CurrPageIndex))},a.PageIndexChange=function(b){a.EntityList_FunctionVM.length>0&&(a.FunList=q(a.EntityList_FunctionVM,a.Sort,a.reverse),a.FunList=r(a.FunList,{FunctionType:a.EntityF.FunctionType}),a.CurrPageIndex=b,a.TotalCount=a.FunList.length,a.FunList=a.FunList.slice(a.PageSize*(a.CurrPageIndex-1),a.PageSize*a.CurrPageIndex))}};d.$inject=c,angular.module("MainModule").controller("FManageController",d)}(),function(){"use strict";var a=["CustomStateProvider"],b=function(a){a.AddState(Path.FunsPath,"FTManage","",{initData:["WCFAuthInfoVM","FunTypeMgtSerClient",function(a,b){var c=new a;return c.initData(),b.GetEmptyFTVM(c)}]}),a.AddState(Path.FunsPath,"FTManage","Edit",{initData:["$stateParams","WCFAuthInfoVM","FunTypeMgtSerClient",function(a,b,c){var d=new b;d.initData(),d.SetFunKeyAndTypeKey("FTManage","Edit");var e={entity_WCFAuthInfoVM:d,str_FTID:a.FTID};return c.GetEntityByID(e)}]},"/:FTID"),a.AddState(Path.FunsPath,"FTManage","Create",{initData:["WCFAuthInfoVM","FunTypeMgtSerClient",function(a,b){var c=new a;return c.initData(),b.GetEmptyFTVM(c)}]})};b.$inject=a,angular.module("MainModule").config(b);var c=["$scope","$q","$filter","$stateParams","$location","$sessionStorage","$state","WCFAuthInfoVM","ClientSessionMgt","FunTypeMgtSerClient","CheckPrivilegeSerClient","WCFReturnResult","MsgBoxModel"],d=function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(a,c){var d=b.defer(),e=new h;return e.initData(),e.SetFunKeyAndTypeKey("FManage",c),a.entity_WCFAuthInfoVM=e,j.GetListWithPaging(a).then(function(a){d.resolve(a)},function(a){d.reject(a)}),d.promise}function o(){angular.isUndefined(f.MultiLingualRes)||null==f.MultiLingualRes||(a.Captions={SearchCriteria:f.MultiLingualRes.SearchCriteria,List:f.MultiLingualRes.List,FunctionType:f.MultiLingualRes.FunctionType,FTManage_Create:f.MultiLingualRes.FTManage_Create,Operation:f.MultiLingualRes.Operation,Delete:f.MultiLingualRes.Delete,Edit:f.MultiLingualRes.Edit,Search:f.MultiLingualRes.Search,Save:f.MultiLingualRes.Save,BacktoList:f.MultiLingualRes.BacktoList,E019:f.MultiLingualRes.E019},r=g.includes("Main.FTManage.Edit")?f.MultiLingualRes.FTManage_Edit:g.includes("Main.FTManage.Create")?f.MultiLingualRes.FTManage_Create:f.MultiLingualRes.FTManage,angular.element(window.document)[0].title=r);var c=new i;c.PageTitle=r;var m=c.GetSystemInfo();a.SystemInfo=m;var o=new h;if(o.initData(),g.includes("Main.FTManage.Edit")){a.EditId=d.FTID;var s=j.GetEntityByID_Result();if(!angular.isUndefined(s)&&null!=s){var t=new l(s),u=t.GetErrMsgs();if(t.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,e.path(),r,u);a.EntityFT=t.Entity_FunctionTypeVM}}else if(g.includes("Main.FTManage.Create")){var t=new l(j.GetEmptyFTVM_Result()),u=t.GetErrMsgs();if(t.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,e.path(),r,u);a.EntityFT=t.Entity_FunctionTypeVM}else{a.DisplayPageNum=a.SystemInfo.DisplayPageNum,a.PageSize=a.SystemInfo.PageSize,a.Sort=a.Sort||"",a.SortDir=a.SortDir||"",a.reverse="desc"==a.SortDir;var t=new l(j.GetEmptyFTVM_Result()),u=t.GetErrMsgs();if(t.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,e.path(),r,u);a.EntityFT=t.Entity_FunctionTypeVM,a.Sort=a.Sort||a.EntityFT.DefaultSortColumn,a.SortDir=a.SortDir||a.EntityFT.DefaultSortDir,a.reverse="desc"==a.SortDir;var v={entity_WCFAuthInfoVM:void 0,entity_SearchCriteria:null,int_CurrentPage:1,int_PageSize:2147483647,str_SortColumn:"",str_SortDir:"",str_CustomFilter:""},w=n(v,"View"),o=new h;o.initData(),o.SetFunKeyAndTypeKey("FTManage","Create");var x={entity_WCFAuthInfoVM:o,isCheckFunType:!0},y=k.CheckPrivilege(x);b.all([w,y]).then(function(b){var c=new l(b[0].data),d=b[1].data;a.CheckPrivilege_Create=d;c.GetErrMsgs();if(c.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,e.path(),r,result.GetErrMsgs());a.EntityList_FunctionTypeVM=c.EntityList_FunctionTypeVM,a.FunTypeList=p(a.EntityList_FunctionTypeVM,a.Sort,a.reverse),a.FunTypeList=q(a.FunTypeList,{FunctionType:a.EntityFT.FunctionType}),a.CurrPageIndex=1,a.TotalCount=a.FunTypeList.length,a.FunTypeList=a.FunTypeList.slice(a.PageSize*(a.CurrPageIndex-1),a.PageSize*a.CurrPageIndex)},function(a){var b=new WCFErrorContract(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,e.path(),r,b.StrMsg,b.StrTraceMsg)})}}var p=c("orderBy"),q=c("filter"),r="";o(),a.Search=function(){a.EntityList_FunctionTypeVM.length>0&&(a.FunTypeList=p(a.EntityList_FunctionTypeVM,a.Sort,a.reverse),a.FunTypeList=q(a.FunTypeList,{FunctionType:a.EntityFT.FunctionType}),a.CurrPageIndex=1,a.TotalCount=a.FunTypeList.length,a.FunTypeList=a.FunTypeList.slice(a.PageSize*(a.CurrPageIndex-1),a.PageSize*a.CurrPageIndex));
},a.Delete=function(a){r=f.MultiLingualRes.FTManage_Delete;var b=new m;b.OpenLoadingDialog();var c=new h;c.initData(),c.SetFunKeyAndTypeKey("FTManage","Delete");var d={entity_WCFAuthInfoVM:c,str_FTID:a};j.Delete(d).then(function(a){if(!angular.isUndefined(a)&&null!=a){var c=new l(a.data);if(c.HasError())throw b.CloseLoadingDialog(),new ExcetionInst(ExceptionType.ValidationError,e.path(),r,c.GetErrMsgs());g.includes("Main.FTManage.Edit")?g.go("Main.FTManage",{},{reload:!0}):g.reload(),b.ShowMsg(BootstrapDialog.TYPE_SUCCESS,r||"",f.MultiLingualRes.I001||""),b.CloseLoadingDialog()}},function(a){var b=new WCFErrorContract(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,e.path(),r,b.StrMsg,b.StrTraceMsg)})},a.Edit=function(){var b=new m;b.OpenLoadingDialog();var c=new h;c.initData(),c.SetFunKeyAndTypeKey("FTManage","Edit");var d={entity_WCFAuthInfoVM:c,entity_FunTypeVM:a.EntityFT};j.Update(d).then(function(a){if(!angular.isUndefined(a)&&null!=a){var c=new l(a.data),d=c.GetErrMsgs();if(c.HasMsgs())throw b.CloseLoadingDialog(),new ExcetionInst(ExceptionType.ValidationError,e.path(),r,d);g.reload(),b.ShowMsg(BootstrapDialog.TYPE_SUCCESS,r||"",f.MultiLingualRes.I000||""),b.CloseLoadingDialog()}},function(a){var b=new WCFErrorContract(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,e.path(),r,b.StrMsg,b.StrTraceMsg)})},a.Create=function(){var b=new m;b.OpenLoadingDialog();var c=new h;c.initData(),c.SetFunKeyAndTypeKey("FManage","Create");var d={entity_WCFAuthInfoVM:c,entity_FunTypeVM:a.EntityFT};j.Create(d).then(function(a){if(!angular.isUndefined(a)&&null!=a){var c=new l(a.data),d=c.GetErrMsgs();if(c.HasMsgs())throw b.CloseLoadingDialog(),new ExcetionInst(ExceptionType.ValidationError,e.path(),r,d);g.go("Main.FTManage",{},{reload:!0}),b.ShowMsg(BootstrapDialog.TYPE_SUCCESS,r||"",f.MultiLingualRes.I000||""),b.CloseLoadingDialog()}},function(a){var b=new WCFErrorContract(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,e.path(),r,b.StrMsg,b.StrTraceMsg)})},a.SortBy=function(b){a.reverse=!0,a.Sort==b?(a.SortDir="desc"==a.SortDir?"asc":"desc",a.reverse="desc"==a.SortDir):(a.Sort=b,a.SortDir="asc",a.reverse=!1),a.EntityList_FunctionTypeVM.length>0&&(a.FunTypeList=p(a.EntityList_FunctionTypeVM,a.Sort,a.reverse),a.FunTypeList=q(a.FunTypeList,{FunctionType:a.EntityFT.FunctionType}),a.TotalCount=a.FunTypeList.length,a.FunTypeList=a.FunTypeList.slice(a.PageSize*(a.CurrPageIndex-1),a.PageSize*a.CurrPageIndex))},a.PageIndexChange=function(b){a.EntityList_FunctionTypeVM.length>0&&(a.FunTypeList=p(a.EntityList_FunctionTypeVM,a.Sort,a.reverse),a.FunTypeList=q(a.FunTypeList,{FunctionType:a.EntityFT.FunctionType}),a.CurrPageIndex=b,a.TotalCount=a.FunTypeList.length,a.FunTypeList=a.FunTypeList.slice(a.PageSize*(a.CurrPageIndex-1),a.PageSize*a.CurrPageIndex))}};d.$inject=c,angular.module("MainModule").controller("FTManageController",d)}(),function(){"use strict";var a=["$stateProvider","$urlRouterProvider"],b=function(a,b){a.state("Main.Home",{url:"/Home","abstract":!0}).state("Main.Home.IndexPart1",{url:"",views:{"Content@Main":{templateUrl:Path.HomePath+"Home_1.tpl.html",controller:"HomeController"}}}).state("Main.Home.IndexPart2",{url:"/Part2",views:{"Content@Main":{templateUrl:Path.HomePath+"Home_2.tpl.html",controller:"HomeController"}}}).state("Main.Home.IndexPart3",{url:"/Part3",views:{"Content@Main":{templateUrl:Path.HomePath+"Home_3.tpl.html",controller:"HomeController"}}})};b.$inject=a,angular.module("MainModule").config(b);var c=["$state","$scope","$sessionStorage"],d=function(a,b,c){function d(){angular.isUndefined(c.MultiLingualRes)||null==c.MultiLingualRes||(a.includes("Main.Home.IndexPart1")?e=c.MultiLingualRes.Home_IndexPart1:a.includes("Main.Home.IndexPart2")?e=c.MultiLingualRes.Home_IndexPart2:a.includes("Main.Home.IndexPart3")&&(e=c.MultiLingualRes.Home_IndexPart3)),angular.element(window.document)[0].title=e}var e="";d()};d.$inject=c,angular.module("MainModule").controller("HomeController",d)}(),function(){"use strict";var a=["CustomStateProvider"],b=function(a){a.AddState(Path.FunsPath,"LUOrgDetailsManage","",{initData:["WCFAuthInfoVM","OrgDetailMgtSerClient",function(a,b){var c=new a;return c.initData(),b.GetEmptyOrgDetailVM(c)}]}),a.AddState(Path.FunsPath,"LUOrgDetailsManage","Edit",{initData:["$stateParams","WCFAuthInfoVM","OrgDetailMgtSerClient",function(a,b,c){var d=new b;d.initData(),d.SetFunKeyAndTypeKey("LUOrgDetailsManage","Edit");var e={entity_WCFAuthInfoVM:d,str_OrgDetailsID:a.OrgDetailID};return c.GetEntityByID(e)}],initData_Funs:["WCFAuthInfoVM","FunMgtSerClient",function(a,b){var c=new a;return c.initData(),b.GetAll(c)}],initData_Roles:["WCFAuthInfoVM","RoleMgtSerClient",function(a,b){var c=new a;return c.initData(),b.GetAll(c)}],initData_GetPrivilegeByUserID:["$stateParams","WCFAuthInfoVM","OrgDetailMgtSerClient",function(a,b,c){var d=new b;d.initData();var e={entity_WCFAuthInfoVM:d,str_ID:a.OrgDetailID,enum_RoleType:RoleType.Organization};return c.GetPrivilegeByUserID(e)}],initData_GetRoleSettingsByOrgDID:["$stateParams","WCFAuthInfoVM","OrgDetailMgtSerClient",function(a,b,c){var d=new b;d.initData();var e={entity_WCFAuthInfoVM:d,str_OrgDetailsID:a.OrgDetailID};return c.GetRoleSettingsByOrgDID(e)}]},"/:OrgDetailID"),a.AddState(Path.FunsPath,"LUOrgDetailsManage","Create",{initData:["WCFAuthInfoVM","OrgDetailMgtSerClient",function(a,b){var c=new a;return c.initData(),b.GetEmptyOrgDetailVM(c)}],initData_Funs:["WCFAuthInfoVM","FunMgtSerClient",function(a,b){var c=new a;return c.initData(),b.GetAll(c)}],initData_Roles:["WCFAuthInfoVM","RoleMgtSerClient",function(a,b){var c=new a;return c.initData(),b.GetAll(c)}]})};b.$inject=a,angular.module("MainModule").config(b);var c=["$scope","$q","$filter","$stateParams","$location","$sessionStorage","$state","WCFAuthInfoVM","ClientSessionMgt","FunMgtSerClient","OrgDetailMgtSerClient","RoleMgtSerClient","CheckPrivilegeSerClient","WCFReturnResult","WCFErrorContract","MsgBoxModel"],d=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(a,c){var d=b.defer(),e=new h;return e.initData(),e.SetFunKeyAndTypeKey("LUOrgDetailsManage",c),a.entity_WCFAuthInfoVM=e,k.GetListWithPaging(a).then(function(a){d.resolve(a)},function(a){d.reject(a)}),d.promise}function r(){angular.isUndefined(f.MultiLingualRes)||null==f.MultiLingualRes||(a.Captions={SearchCriteria:f.MultiLingualRes.SearchCriteria,List:f.MultiLingualRes.List,LUOrgDetailsManage_Create:f.MultiLingualRes.LUOrgDetailsManage_Create,LUOrgDetailsManage_Edit:f.MultiLingualRes.LUOrgDetailsManage_Edit,Operation:f.MultiLingualRes.Operation,Delete:f.MultiLingualRes.Delete,Edit:f.MultiLingualRes.Edit,Search:f.MultiLingualRes.Search,Save:f.MultiLingualRes.Save,BacktoList:f.MultiLingualRes.BacktoList,Key:f.MultiLingualRes.Key,Type:f.MultiLingualRes.Type,SpecificFunctions:f.MultiLingualRes.SpecificFunctions,AsRoleSetting:f.MultiLingualRes.AsRoleSetting,RoleName:f.MultiLingualRes.RoleName,All:f.MultiLingualRes.All,OrgDetailsKey:f.MultiLingualRes.OrgDetailsKey,OrgDetailsType:f.MultiLingualRes.OrgDetailsType,E019:f.MultiLingualRes.E019},u=g.includes("Main.LUOrgDetailsManage.Edit")?f.MultiLingualRes.LUOrganizationManage_Edit:g.includes("Main.LUOrgDetailsManage.Create")?f.MultiLingualRes.LUOrganizationManage_Create:f.MultiLingualRes.LUOrganizationManage,angular.element(window.document)[0].title=u);var c=new i;c.PageTitle=u;var p=c.GetSystemInfo();a.SystemInfo=p;var r=new h;if(r.initData(),g.includes("Main.LUOrgDetailsManage.Edit")){a.EditId=d.RoleID;var v=k.GetEntityByID_Result();if(!angular.isUndefined(v)&&null!=v){var w=new n(v),x=w.GetErrMsgs();if(w.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,e.path(),u,x);if(a.EntityOrgDetail=w.Entity_LUserOrgDetailsVM,a.DisplayPageNum=a.SystemInfo.DisplayPageNum,a.PageSize=a.SystemInfo.PageSize,a.FunsList=j.GetAll_Result(),1==a.EntityOrgDetail.OrgDetailsType){var y=k.GetPrivilegeByUserID_Result();angular.isUndefined(y)||null==y||(a.SpeFunDetailList=y),a.SpeRoleDetailList=[]}else if(2==a.EntityOrgDetail.OrgDetailsType){var y=k.GetRoleSettingsByOrgDID_Result();angular.isUndefined(y)||null==y||(a.SpeRoleDetailList=y),a.SpeFunDetailList=[]}a.RolesList=l.GetAll_Result(),a.msgBoxTitle=u}}else if(g.includes("Main.LUOrgDetailsManage.Create")){var w=new n(k.GetEmptyOrgDetailVM_Result()),x=w.GetErrMsgs();if(w.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,e.path(),u,x);a.EntityOrgDetail=w.Entity_LUserOrgDetailsVM,a.DisplayPageNum=a.SystemInfo.DisplayPageNum,a.PageSize=a.SystemInfo.PageSize,a.FunsList=j.GetAll_Result(),a.SpeFunDetailList=[],a.RolesList=l.GetAll_Result(),a.SpeRoleDetailList=[],a.msgBoxTitle=u}else{a.DisplayPageNum=a.SystemInfo.DisplayPageNum,a.PageSize=a.SystemInfo.PageSize,a.Sort=a.Sort||"",a.SortDir=a.SortDir||"",a.reverse="desc"==a.SortDir;var w=new n(k.GetEmptyOrgDetailVM_Result()),x=w.GetErrMsgs();if(w.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,e.path(),u,x);a.EntityOrgDetail=w,a.Sort=a.Sort||a.EntityOrgDetail.DefaultSortColumn,a.SortDir=a.SortDir||a.EntityOrgDetail.DefaultSortDir,a.reverse="desc"==a.SortDir;var z={entity_WCFAuthInfoVM:void 0,entity_SearchCriteria:null,int_CurrentPage:1,int_PageSize:2147483647,str_SortColumn:"",str_SortDir:"",str_CustomFilter:""},A=q(z,"View"),r=new h;r.initData(),r.SetFunKeyAndTypeKey("LUOrgDetailsManage","Create");var B={entity_WCFAuthInfoVM:r,isCheckFunType:!0},C=m.CheckPrivilege(B);b.all([A,C]).then(function(b){var c=new n(b[0].data),d=b[1].data;a.CheckPrivilege_Create=d;c.GetErrMsgs();if(c.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,e.path(),u,y.GetErrMsgs());a.EntityList_LUserOrgDetailsVM=c.EntityList_LUserOrgDetailsVM,a.OrgDetailList=s(a.EntityList_LUserOrgDetailsVM,a.Sort,a.reverse),a.OrgDetailList=t(a.OrgDetailList,{OrgDetailsKey:a.EntityOrgDetail.OrgDetailsKey}),angular.isUndefined(a.EntityOrgDetail.OrgDetailsType)||null==a.EntityOrgDetail.OrgDetailsType||(a.OrgDetailList=t(a.OrgDetailList,{OrgDetailsType:a.EntityOrgDetail.OrgDetailsType})),a.OrgDetailList=t(a.OrgDetailList,{StrRoles:a.EntityOrgDetail.StrRoles}),a.CurrPageIndex=1,a.TotalCount=a.OrgDetailList.length,a.OrgDetailList=a.OrgDetailList.slice(a.PageSize*(a.CurrPageIndex-1),a.PageSize*a.CurrPageIndex)},function(a){var b=new o(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,e.path(),u,b.StrMsg,b.StrTraceMsg)})}}var s=c("orderBy"),t=c("filter"),u="";r(),a.Search=function(){a.EntityList_LUserOrgDetailsVM.length>0&&(a.OrgDetailList=s(a.EntityList_LUserOrgDetailsVM,a.Sort,a.reverse),a.OrgDetailList=t(a.OrgDetailList,{OrgDetailsKey:a.EntityOrgDetail.OrgDetailsKey}),angular.isUndefined(a.EntityOrgDetail.OrgDetailsType)||null==a.EntityOrgDetail.OrgDetailsType||(a.OrgDetailList=t(a.OrgDetailList,{OrgDetailsType:a.EntityOrgDetail.OrgDetailsType})),a.OrgDetailList=t(a.OrgDetailList,{StrRoles:a.EntityOrgDetail.StrRoles}),a.CurrPageIndex=1,a.TotalCount=a.OrgDetailList.length,a.OrgDetailList=a.OrgDetailList.slice(a.PageSize*(a.CurrPageIndex-1),a.PageSize*a.CurrPageIndex))},a.Delete=function(a){u=f.MultiLingualRes.LUOrgDetailsManage_Delete;var b=new p;b.OpenLoadingDialog();var c=new h;c.initData(),c.SetFunKeyAndTypeKey("LUOrgDetailsManage","Delete");var d={entity_WCFAuthInfoVM:c,str_OrgDetailsID:a};k.Delete(d).then(function(a){if(!angular.isUndefined(a)&&null!=a){var c=new n(a.data);if(c.HasError())throw b.CloseLoadingDialog(),new ExcetionInst(ExceptionType.ValidationError,e.path(),u,c.GetErrMsgs());g.includes("Main.LUOrgDetailsManage.Edit")?g.go("Main.LUOrgDetailsManage",{},{reload:!0}):g.reload(),b.ShowMsg(BootstrapDialog.TYPE_SUCCESS,u||"",f.MultiLingualRes.I001||""),b.CloseLoadingDialog()}},function(a){var b=new o(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,e.path(),u,b.StrMsg,b.StrTraceMsg)})},a.Edit=function(){var b=new p;b.OpenLoadingDialog();var c=new h;c.initData(),c.SetFunKeyAndTypeKey("LUOrgDetailsManage","Edit"),1==a.EntityOrgDetail.OrgDetailsType?a.EntityOrgDetail.EntityList_FDInfo=a.SpeFunDetailList:2==a.EntityOrgDetail.OrgDetailsType&&(a.EntityOrgDetail.EntityList_Role=a.SpeRoleDetailList);var d={entity_WCFAuthInfoVM:c,entity_OrgDetailsVM:a.EntityOrgDetail};k.Update(d).then(function(a){if(!angular.isUndefined(a)&&null!=a){var c=new n(a.data),d=c.GetErrMsgs();if(c.HasMsgs())throw b.CloseLoadingDialog(),new ExcetionInst(ExceptionType.ValidationError,e.path(),u,d);g.reload(),b.ShowMsg(BootstrapDialog.TYPE_SUCCESS,u||"",f.MultiLingualRes.I000||""),b.CloseLoadingDialog()}},function(a){var b=new o(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,e.path(),u,b.StrMsg,b.StrTraceMsg)})},a.Create=function(){var b=new p;b.OpenLoadingDialog();var c=new h;c.initData(),c.SetFunKeyAndTypeKey("LUOrgDetailsManage","Create"),1==a.EntityOrgDetail.OrgDetailsType?a.EntityOrgDetail.EntityList_FDInfo=a.SpeFunDetailList:2==a.EntityOrgDetail.OrgDetailsType&&(a.EntityOrgDetail.EntityList_Role=a.SpeRoleDetailList);var d={entity_WCFAuthInfoVM:c,entity_OrgDetailsVM:a.EntityOrgDetail};k.Create(d).then(function(a){if(!angular.isUndefined(a)&&null!=a){var c=new n(a.data),d=c.GetErrMsgs();if(c.HasMsgs())throw b.CloseLoadingDialog(),new ExcetionInst(ExceptionType.ValidationError,e.path(),u,d);g.go("Main.LUOrgDetailsManage",{},{reload:!0}),b.ShowMsg(BootstrapDialog.TYPE_SUCCESS,u||"",f.MultiLingualRes.I000||""),b.CloseLoadingDialog()}},function(a){var b=new o(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,e.path(),u,b.StrMsg,b.StrTraceMsg)})},a.SortBy=function(b){a.reverse=!0,a.Sort==b?(a.SortDir="desc"==a.SortDir?"asc":"desc",a.reverse="desc"==a.SortDir):(a.Sort=b,a.SortDir="asc",a.reverse=!1),a.EntityList_LUserOrgDetailsVM.length>0&&(a.OrgDetailList=s(a.EntityList_LUserOrgDetailsVM,a.Sort,a.reverse),a.OrgDetailList=t(a.OrgDetailList,{OrgDetailsKey:a.EntityOrgDetail.OrgDetailsKey}),angular.isUndefined(a.EntityOrgDetail.OrgDetailsType)||null==a.EntityOrgDetail.OrgDetailsType||(a.OrgDetailList=t(a.OrgDetailList,{OrgDetailsType:a.EntityOrgDetail.OrgDetailsType})),a.OrgDetailList=t(a.OrgDetailList,{StrRoles:a.EntityOrgDetail.StrRoles}),a.TotalCount=a.OrgDetailList.length,a.OrgDetailList=a.OrgDetailList.slice(a.PageSize*(a.CurrPageIndex-1),a.PageSize*a.CurrPageIndex))},a.PageIndexChange=function(b){a.EntityList_LUserOrgDetailsVM.length>0&&(a.OrgDetailList=s(a.EntityList_LUserOrgDetailsVM,a.Sort,a.reverse),a.OrgDetailList=t(a.OrgDetailList,{OrgDetailsKey:a.EntityOrgDetail.OrgDetailsKey}),angular.isUndefined(a.EntityOrgDetail.OrgDetailsType)||null==a.EntityOrgDetail.OrgDetailsType||(a.OrgDetailList=t(a.OrgDetailList,{OrgDetailsType:a.EntityOrgDetail.OrgDetailsType})),a.OrgDetailList=t(a.OrgDetailList,{StrRoles:a.EntityOrgDetail.StrRoles}),a.CurrPageIndex=b,a.TotalCount=a.OrgDetailList.length,a.OrgDetailList=a.OrgDetailList.slice(a.PageSize*(a.CurrPageIndex-1),a.PageSize*a.CurrPageIndex))}};d.$inject=c,angular.module("LoginModule").controller("LUOrgDetailsManageController",d)}(),function(){"use strict";var a=["CustomStateProvider"],b=function(a){a.AddState(Path.FunsPath,"LUOrganizationManage","",{initData:["WCFAuthInfoVM","OrgMgtSerClient",function(a,b){var c=new a;return c.initData(),b.GetEmptyOrgVM(c)}]}),a.AddState(Path.FunsPath,"LUOrganizationManage","Edit",{initData:["$stateParams","WCFAuthInfoVM","OrgMgtSerClient",function(a,b,c){var d=new b;d.initData(),d.SetFunKeyAndTypeKey("LUOrganizationManage","Edit");var e={entity_WCFAuthInfoVM:d,str_OrgID:a.OrgID};return c.GetEntityByID(e)}]},"/:OrgID"),a.AddState(Path.FunsPath,"LUOrganizationManage","Create",{initData:["WCFAuthInfoVM","OrgMgtSerClient",function(a,b){var c=new a;return c.initData(),b.GetEmptyOrgVM(c)}]})};b.$inject=a,angular.module("MainModule").config(b);var c=["$scope","$q","$filter","$stateParams","$location","$sessionStorage","$state","WCFAuthInfoVM","ClientSessionMgt","OrgMgtSerClient","CheckPrivilegeSerClient","WCFReturnResult","WCFErrorContract","MsgBoxModel"],d=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(a,c){var d=b.defer(),e=new h;return e.initData(),e.SetFunKeyAndTypeKey("LUOrganizationManage",c),a.entity_WCFAuthInfoVM=e,j.GetListWithPaging(a).then(function(a){d.resolve(a)},function(a){d.reject(a)}),d.promise}function p(){angular.isUndefined(f.MultiLingualRes)||null==f.MultiLingualRes||(a.Captions={SearchCriteria:f.MultiLingualRes.SearchCriteria,List:f.MultiLingualRes.List,LUOrganizationManage_Create:f.MultiLingualRes.LUOrganizationManage_Create,LUOrganizationManage_Edit:f.MultiLingualRes.LUOrganizationManage_Edit,Operation:f.MultiLingualRes.Operation,Delete:f.MultiLingualRes.Delete,Edit:f.MultiLingualRes.Edit,Search:f.MultiLingualRes.Search,Save:f.MultiLingualRes.Save,BacktoList:f.MultiLingualRes.BacktoList,OrganizationPath:f.MultiLingualRes.OrganizationPath,OrganizationKey:f.MultiLingualRes.OrganizationKey,OrganizationName:f.MultiLingualRes.OrganizationName,OrganizationStatus:f.MultiLingualRes.OrganizationStatus,Active:f.MultiLingualRes.Active,InActive:f.MultiLingualRes.InActive,E019:f.MultiLingualRes.E019},s=g.includes("Main.LUOrganizationManage.Edit")?f.MultiLingualRes.LUOrganizationManage_Edit:g.includes("Main.LUOrganizationManage.Create")?f.MultiLingualRes.LUOrganizationManage_Create:f.MultiLingualRes.LUOrganizationManage,angular.element(window.document)[0].title=s);var c=new i;c.PageTitle=s;var n=c.GetSystemInfo();a.SystemInfo=n;var p=new h;if(p.initData(),g.includes("Main.LUOrganizationManage.Edit")){a.EditId=d.RoleID;var t=j.GetEntityByID_Result();if(!angular.isUndefined(t)&&null!=t){var u=new l(t),v=u.GetErrMsgs();if(u.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,e.path(),s,v);a.EntityOrg=u.Entity_LUserOrganizationVM,a.DisplayPageNum=a.SystemInfo.DisplayPageNum,a.PageSize=a.SystemInfo.PageSize,a.msgBoxTitle=s}}else if(g.includes("Main.LUOrganizationManage.Create")){var u=new l(j.GetEmptyOrgVM_Result()),v=u.GetErrMsgs();if(u.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,e.path(),s,v);a.EntityOrg=u.Entity_LUserOrganizationVM,a.DisplayPageNum=a.SystemInfo.DisplayPageNum,a.PageSize=a.SystemInfo.PageSize,a.msgBoxTitle=s}else{a.DisplayPageNum=a.SystemInfo.DisplayPageNum,a.PageSize=a.SystemInfo.PageSize,a.Sort=a.Sort||"",a.SortDir=a.SortDir||"",a.reverse="desc"==a.SortDir;var u=new l(j.GetEmptyOrgVM_Result()),v=u.GetErrMsgs();if(u.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,e.path(),s,v);a.EntityOrg=u.Entity_LUserOrganizationVM,a.Sort=a.Sort||a.EntityOrg.DefaultSortColumn,a.SortDir=a.SortDir||a.EntityOrg.DefaultSortDir,a.reverse="desc"==a.SortDir;var w={entity_WCFAuthInfoVM:void 0,entity_SearchCriteria:null,int_CurrentPage:1,int_PageSize:2147483647,str_SortColumn:"",str_SortDir:"",str_CustomFilter:""},x=o(w,"View"),p=new h;p.initData(),p.SetFunKeyAndTypeKey("LUOrganizationManage","Create");var y={entity_WCFAuthInfoVM:p,isCheckFunType:!0},z=k.CheckPrivilege(y);b.all([x,z]).then(function(b){var c=new l(b[0].data),d=b[1].data;a.CheckPrivilege_Create=d;c.GetErrMsgs();if(c.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,e.path(),s,result.GetErrMsgs());a.EntityList_LUserOrganizationVM=c.EntityList_LUserOrganizationVM,a.OrgList=q(a.EntityList_LUserOrganizationVM,a.Sort,a.reverse),a.OrgList=r(a.OrgList,{OrganizationPath:a.EntityOrg.OrganizationPath}),a.OrgList=r(a.OrgList,{OrganizationKey:a.EntityOrg.OrganizationKey}),a.OrgList=r(a.OrgList,{OrganizationName:a.EntityOrg.OrganizationName}),a.CurrPageIndex=1,a.TotalCount=a.OrgList.length,a.OrgList=a.OrgList.slice(a.PageSize*(a.CurrPageIndex-1),a.PageSize*a.CurrPageIndex)},function(a){var b=new m(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,e.path(),s,b.StrMsg,b.StrTraceMsg)})}}var q=c("orderBy"),r=c("filter"),s="";p(),a.Search=function(){a.EntityList_LUserOrganizationVM.length>0&&(a.OrgList=q(a.EntityList_LUserOrganizationVM,a.Sort,a.reverse),a.OrgList=r(a.OrgList,{OrganizationPath:a.EntityOrg.OrganizationPath}),a.OrgList=r(a.OrgList,{OrganizationKey:a.EntityOrg.OrganizationKey}),a.OrgList=r(a.OrgList,{OrganizationName:a.EntityOrg.OrganizationName}),a.CurrPageIndex=1,a.TotalCount=a.OrgList.length,a.OrgList=a.OrgList.slice(a.PageSize*(a.CurrPageIndex-1),a.PageSize*a.CurrPageIndex))},a.Delete=function(a){s=f.MultiLingualRes.LUOrganizationManage_Delete;var b=new n;b.OpenLoadingDialog();var c=new h;c.initData(),c.SetFunKeyAndTypeKey("LUOrganizationManage","Delete");var d={entity_WCFAuthInfoVM:c,str_OrgID:a};j.Delete(d).then(function(a){if(!angular.isUndefined(a)&&null!=a){var c=new l(a.data);if(c.HasError())throw b.CloseLoadingDialog(),new ExcetionInst(ExceptionType.ValidationError,e.path(),s,c.GetErrMsgs());g.includes("Main.LUOrganizationManage.Edit")?g.go("Main.LUOrganizationManage",{},{reload:!0}):g.reload(),b.ShowMsg(BootstrapDialog.TYPE_SUCCESS,s||"",f.MultiLingualRes.I001||""),b.CloseLoadingDialog()}},function(a){var b=new m(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,e.path(),s,b.StrMsg,b.StrTraceMsg)})},a.Edit=function(){var b=new n;b.OpenLoadingDialog();var c=new h;c.initData(),c.SetFunKeyAndTypeKey("LUOrganizationManage","Edit"),a.EntityOrg.EntityList_FDInfo=a.SpeFunDetailList;var d={entity_WCFAuthInfoVM:c,entity_OrgVM:a.EntityOrg};j.Update(d).then(function(a){if(!angular.isUndefined(a)&&null!=a){var c=new l(a.data),d=c.GetErrMsgs();if(c.HasMsgs())throw b.CloseLoadingDialog(),new ExcetionInst(ExceptionType.ValidationError,e.path(),s,d);g.reload(),b.ShowMsg(BootstrapDialog.TYPE_SUCCESS,s||"",f.MultiLingualRes.I000||""),b.CloseLoadingDialog()}},function(a){var b=new m(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,e.path(),s,b.StrMsg,b.StrTraceMsg)})},a.Create=function(){var b=new n;b.OpenLoadingDialog();var c=new h;c.initData(),c.SetFunKeyAndTypeKey("LUOrganizationManage","Create"),a.EntityOrg.EntityList_FDInfo=a.SpeFunDetailList;var d={entity_WCFAuthInfoVM:c,entity_OrgVM:a.EntityOrg};j.Create(d).then(function(a){if(!angular.isUndefined(a)&&null!=a){var c=new l(a.data),d=c.GetErrMsgs();if(c.HasMsgs())throw b.CloseLoadingDialog(),new ExcetionInst(ExceptionType.ValidationError,e.path(),s,d);g.go("Main.LUOrganizationManage",{},{reload:!0}),b.ShowMsg(BootstrapDialog.TYPE_SUCCESS,s||"",f.MultiLingualRes.I000||""),b.CloseLoadingDialog()}},function(a){var b=new m(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,e.path(),s,b.StrMsg,b.StrTraceMsg)})},a.SortBy=function(b){a.reverse=!0,a.Sort==b?(a.SortDir="desc"==a.SortDir?"asc":"desc",a.reverse="desc"==a.SortDir):(a.Sort=b,a.SortDir="asc",a.reverse=!1),a.EntityList_LUserOrganizationVM.length>0&&(a.OrgList=q(a.EntityList_LUserOrganizationVM,a.Sort,a.reverse),a.OrgList=r(a.OrgList,{OrganizationPath:a.EntityOrg.OrganizationPath}),a.OrgList=r(a.OrgList,{OrganizationKey:a.EntityOrg.OrganizationKey}),a.OrgList=r(a.OrgList,{OrganizationName:a.EntityOrg.OrganizationName}),a.TotalCount=a.OrgList.length,a.OrgList=a.OrgList.slice(a.PageSize*(a.CurrPageIndex-1),a.PageSize*a.CurrPageIndex))},a.PageIndexChange=function(b){a.EntityList_LUserOrganizationVM.length>0&&(a.OrgList=q(a.EntityList_LUserOrganizationVM,a.Sort,a.reverse),a.OrgList=r(a.OrgList,{OrganizationPath:a.EntityOrg.OrganizationPath}),a.OrgList=r(a.OrgList,{OrganizationKey:a.EntityOrg.OrganizationKey}),a.OrgList=r(a.OrgList,{OrganizationName:a.EntityOrg.OrganizationName}),a.CurrPageIndex=b,a.TotalCount=a.OrgList.length,a.OrgList=a.OrgList.slice(a.PageSize*(a.CurrPageIndex-1),a.PageSize*a.CurrPageIndex))}};d.$inject=c,angular.module("LoginModule").controller("LUOrganizationManageController",d)}(),function(){"use strict";var a=["CustomStateProvider"],b=function(a){a.AddState(Path.FunsPath,"LURoleManage","",{initData:["WCFAuthInfoVM","RoleMgtSerClient",function(a,b){var c=new a;return c.initData(),b.GetEmptyRoleVM(c)}]}),a.AddState(Path.FunsPath,"LURoleManage","Edit",{initData:["$stateParams","WCFAuthInfoVM","RoleMgtSerClient",function(a,b,c){var d=new b;d.initData(),d.SetFunKeyAndTypeKey("LURoleManage","Edit");var e={entity_WCFAuthInfoVM:d,str_RoleID:a.RoleID};return c.GetEntityByID(e)}],initData_Funs:["WCFAuthInfoVM","FunMgtSerClient",function(a,b){var c=new a;return c.initData(),b.GetAll(c)}],initData_GetPrivilegeByUserID:["$stateParams","WCFAuthInfoVM","OrgDetailMgtSerClient",function(a,b,c){var d=new b;d.initData();var e={entity_WCFAuthInfoVM:d,str_ID:a.RoleID,enum_RoleType:RoleType.Role};return c.GetPrivilegeByUserID(e)}]},"/:RoleID"),a.AddState(Path.FunsPath,"LURoleManage","Create",{initData:["WCFAuthInfoVM","RoleMgtSerClient",function(a,b){var c=new a;return c.initData(),b.GetEmptyRoleVM(c)}],initData_Funs:["WCFAuthInfoVM","FunMgtSerClient",function(a,b){var c=new a;return c.initData(),b.GetAll(c)}]})};b.$inject=a,angular.module("MainModule").config(b);var c=["$scope","$q","$filter","$stateParams","$location","$sessionStorage","$state","WCFAuthInfoVM","ClientSessionMgt","FunMgtSerClient","RoleMgtSerClient","OrgDetailMgtSerClient","CheckPrivilegeSerClient","WCFReturnResult","WCFErrorContract","MsgBoxModel"],d=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(a,c){var d=b.defer(),e=new h;return e.initData(),e.SetFunKeyAndTypeKey("LURoleManage",c),a.entity_WCFAuthInfoVM=e,k.GetListWithPaging(a).then(function(a){d.resolve(a)},function(a){d.reject(a)}),d.promise}function r(){angular.isUndefined(f.MultiLingualRes)||null==f.MultiLingualRes||(a.Captions={SearchCriteria:f.MultiLingualRes.SearchCriteria,List:f.MultiLingualRes.List,LURoleManage_Create:f.MultiLingualRes.LURoleManage_Create,LURoleManage_Edit:f.MultiLingualRes.LURoleManage_Edit,Operation:f.MultiLingualRes.Operation,Delete:f.MultiLingualRes.Delete,Edit:f.MultiLingualRes.Edit,Search:f.MultiLingualRes.Search,Save:f.MultiLingualRes.Save,AccessPrivilege:f.MultiLingualRes.AccessPrivilege,RoleName:f.MultiLingualRes.RoleName,CreateDate:f.MultiLingualRes.CreateDate,BacktoList:f.MultiLingualRes.BacktoList,FunctionName:f.MultiLingualRes.FunctionName,FunctionType:f.MultiLingualRes.FunctionType,Add:f.MultiLingualRes.Add,E019:f.MultiLingualRes.E019},u=g.includes("Main.FManage.Edit")?f.MultiLingualRes.LURoleManage_Edit:g.includes("Main.LURoleManage.Create")?f.MultiLingualRes.LURoleManage_Create:f.MultiLingualRes.LURoleManage,angular.element(window.document)[0].title=u);var c=new i;c.PageTitle=u;var p=c.GetSystemInfo();a.SystemInfo=p;var r=new h;if(r.initData(),g.includes("Main.LURoleManage.Edit")){a.EditId=d.RoleID;var v=k.GetEntityByID_Result();if(!angular.isUndefined(v)&&null!=v){var w=new n(v),x=w.GetErrMsgs();if(w.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,e.path(),u,x);a.EntityRole=w.Entity_LUserRoleVM,a.DisplayPageNum=a.SystemInfo.DisplayPageNum,a.PageSize=a.SystemInfo.PageSize,a.FunsList=j.GetAll_Result();var y=l.GetPrivilegeByUserID_Result();angular.isUndefined(y)||null==y||(a.SpeFunDetailList=y),a.msgBoxTitle=u}}else if(g.includes("Main.LURoleManage.Create")){var w=new n(k.GetEmptyRoleVM_Result()),x=w.GetErrMsgs();if(w.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,e.path(),u,x);a.EntityRole=w.Entity_LUserRoleVM,a.DisplayPageNum=a.SystemInfo.DisplayPageNum,a.PageSize=a.SystemInfo.PageSize,a.FunsList=j.GetAll_Result(),a.SpeFunDetailList=[],a.msgBoxTitle=u}else{a.DisplayPageNum=a.SystemInfo.DisplayPageNum,a.PageSize=a.SystemInfo.PageSize,a.DateTimeFormat=a.SystemInfo.DateFormat+" "+a.SystemInfo.TimeFormat,a.Sort=a.Sort||"",a.SortDir=a.SortDir||"",a.reverse="desc"==a.SortDir;var w=new n(k.GetEmptyRoleVM_Result()),x=w.GetErrMsgs();if(w.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,e.path(),u,x);a.EntityRole=w.Entity_LUserRoleVM,a.Sort=a.Sort||a.EntityRole.DefaultSortColumn,a.SortDir=a.SortDir||a.EntityRole.DefaultSortDir,a.reverse="desc"==a.SortDir;var z={entity_WCFAuthInfoVM:void 0,entity_SearchCriteria:null,int_CurrentPage:1,int_PageSize:2147483647,str_SortColumn:"",str_SortDir:"",str_CustomFilter:""},A=q(z,"View"),r=new h;r.initData(),r.SetFunKeyAndTypeKey("LURoleManage","Create");var B={entity_WCFAuthInfoVM:r,isCheckFunType:!0},C=m.CheckPrivilege(B);b.all([A,C]).then(function(b){var c=new n(b[0].data),d=b[1].data;a.CheckPrivilege_Create=d;c.GetErrMsgs();if(c.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,e.path(),u,y.GetErrMsgs());for(var f=0;f<c.EntityList_LUserRoleVM.length;++f)angular.isUndefined(c.EntityList_LUserRoleVM[f].CreateDate)||null==c.EntityList_LUserRoleVM[f].CreateDate||(c.EntityList_LUserRoleVM[f].CreateDate=moment(c.EntityList_LUserRoleVM[f].CreateDate).toDate());a.EntityList_LUserRoleVM=c.EntityList_LUserRoleVM,a.RoleList=s(a.EntityList_LUserRoleVM,a.Sort,a.reverse),a.RoleList=t(a.RoleList,{RoleName:a.EntityRole.RoleName}),a.CurrPageIndex=1,a.TotalCount=a.RoleList.length,a.RoleList=a.RoleList.slice(a.PageSize*(a.CurrPageIndex-1),a.PageSize*a.CurrPageIndex)},function(a){var b=new o(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,e.path(),u,b.StrMsg,b.StrTraceMsg)})}}var s=c("orderBy"),t=c("filter"),u="";r(),a.Search=function(){a.EntityList_LUserRoleVM.length>0&&(a.RoleList=s(a.EntityList_LUserRoleVM,a.Sort,a.reverse),a.RoleList=t(a.RoleList,{RoleName:a.EntityRole.RoleName}),a.CurrPageIndex=1,a.TotalCount=a.RoleList.length,a.RoleList=a.RoleList.slice(a.PageSize*(a.CurrPageIndex-1),a.PageSize*a.CurrPageIndex))},a.Delete=function(a){u=f.MultiLingualRes.LURoleManage_Delete;var b=new p;b.OpenLoadingDialog();var c=new h;c.initData(),c.SetFunKeyAndTypeKey("LURoleManage","Delete");var d={entity_WCFAuthInfoVM:c,str_RoleID:a};k.Delete(d).then(function(a){if(!angular.isUndefined(a)&&null!=a){var c=new n(a.data);if(c.HasError())throw b.CloseLoadingDialog(),new ExcetionInst(ExceptionType.ValidationError,e.path(),u,c.GetErrMsgs());g.includes("Main.LURoleManage.Edit")?g.go("Main.LURoleManage",{},{reload:!0}):g.reload(),b.ShowMsg(BootstrapDialog.TYPE_SUCCESS,u||"",f.MultiLingualRes.I001||""),b.CloseLoadingDialog()}},function(a){var b=new o(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,e.path(),u,b.StrMsg,b.StrTraceMsg)})},a.Edit=function(){var b=new p;b.OpenLoadingDialog();var c=new h;c.initData(),c.SetFunKeyAndTypeKey("LURoleManage","Edit"),a.EntityRole.EntityList_FDInfo=a.SpeFunDetailList;var d={entity_WCFAuthInfoVM:c,entity_RoleVM:a.EntityRole};k.Update(d).then(function(a){if(!angular.isUndefined(a)&&null!=a){var c=new n(a.data),d=c.GetErrMsgs();if(c.HasMsgs())throw b.CloseLoadingDialog(),new ExcetionInst(ExceptionType.ValidationError,e.path(),u,d);g.reload(),b.ShowMsg(BootstrapDialog.TYPE_SUCCESS,u||"",f.MultiLingualRes.I000||""),b.CloseLoadingDialog()}},function(a){var b=new o(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,e.path(),u,b.StrMsg,b.StrTraceMsg)})},a.Create=function(){var b=new p;b.OpenLoadingDialog();var c=new h;c.initData(),c.SetFunKeyAndTypeKey("LURoleManage","Create"),a.EntityRole.EntityList_FDInfo=a.SpeFunDetailList;var d={entity_WCFAuthInfoVM:c,entity_RoleVM:a.EntityRole};k.Create(d).then(function(a){if(!angular.isUndefined(a)&&null!=a){var c=new n(a.data),d=c.GetErrMsgs();if(c.HasMsgs())throw b.CloseLoadingDialog(),new ExcetionInst(ExceptionType.ValidationError,e.path(),u,d);g.go("Main.LURoleManage",{},{reload:!0}),b.ShowMsg(BootstrapDialog.TYPE_SUCCESS,u||"",f.MultiLingualRes.I000||""),b.CloseLoadingDialog()}},function(a){var b=new o(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,e.path(),u,b.StrMsg,b.StrTraceMsg)})},a.SortBy=function(b){a.reverse=!0,a.Sort==b?(a.SortDir="desc"==a.SortDir?"asc":"desc",a.reverse="desc"==a.SortDir):(a.Sort=b,a.SortDir="asc",a.reverse=!1),a.EntityList_LUserRoleVM.length>0&&(a.RoleList=s(a.EntityList_LUserRoleVM,a.Sort,a.reverse),a.RoleList=t(a.RoleList,{RoleName:a.EntityRole.RoleName}),a.TotalCount=a.RoleList.length,a.RoleList=a.RoleList.slice(a.PageSize*(a.CurrPageIndex-1),a.PageSize*a.CurrPageIndex))},a.PageIndexChange=function(b){a.EntityList_LUserRoleVM.length>0&&(a.RoleList=s(a.EntityList_LUserRoleVM,a.Sort,a.reverse),a.RoleList=t(a.RoleList,{RoleName:a.EntityRole.RoleName}),a.CurrPageIndex=b,a.TotalCount=a.RoleList.length,a.RoleList=a.RoleList.slice(a.PageSize*(a.CurrPageIndex-1),a.PageSize*a.CurrPageIndex))}};d.$inject=c,angular.module("MainModule").controller("LURoleManageController",d);
}(),function(){"use strict";var a=["$stateProvider","$urlRouterProvider"],b=function(a,b){a.state("LoginModule",{url:"/LoginModule","abstract":!0}).state("LoginModule.Login",{url:"/Login",views:{"@":{templateUrl:Path.AccControlLoginPath+"Login.tpl.html",controller:"LoginController",resolve:{GetEmptyLoginUserVM:["LoginUserMgtSer",function(a){return a.GetEmptyLoginUserVM()}]}}}}).state("LoginModule.Reset",{url:"/Reset",views:{"@":{templateUrl:Path.AccControlLoginPath+"Reset.tpl.html",controller:"LoginController",resolve:{GetEntityByID:["$rootScope","LoginUserMgtSer","WCFAuthInfoVM",function(a,b,c){var d=new c;d.initData();var e={entity_WCFAuthInfoVM:d,str_LUID:d.GetUserId()};return b.GetEntityByID(e)}]}}}})};b.$inject=a,angular.module("LoginModule").config(b);var c=["$scope","$state","$q","$sce","$location","$cookies","$rootScope","$sessionStorage","SystemInfoRestfulSer","LoginUserMgtSer","LoginUserModel","LUSerLoginResult","MsgBoxModel","ClientSessionMgt","WCFAuthInfoVM","WCFReturnResult"],d=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(){var b=e.path();a.LoginBoxCaptions={LoginBoxTitle:"",LoginNameCaption:"",LoginPwdCaption:"",LanguageCaption:"",LoginBtnCaption:""},a.LoginBoxCaptions.LoginBoxTitle=h.MultiLingualRes.LoginScreenTitle,a.LoginBoxCaptions.LoginNameCaption=h.MultiLingualRes.LoginName,a.LoginBoxCaptions.LoginPwdCaption=h.MultiLingualRes.LoginPwd,a.LoginBoxCaptions.LanguageCaption=h.MultiLingualRes.Language,a.LoginBoxCaptions.LoginBtnCaption=d.trustAsHtml("      "+h.MultiLingualRes.Login),a.ResetBoxCaptions={OriPwdCaption:"",NewPwdCaption:"",ConfirmNewPwdCaption:"",SaveBtnCaption:""},a.ResetBoxCaptions.OriPwdCaption=h.MultiLingualRes.OriPwd,a.ResetBoxCaptions.NewPwdCaption=h.MultiLingualRes.NewPwd,a.ResetBoxCaptions.ConfirmNewPwdCaption=h.MultiLingualRes.ConfirmNewPwd,a.ResetBoxCaptions.SaveBtnCaption=h.MultiLingualRes.Save,"/LoginModule/Login"==b?angular.element(window.document)[0].title=h.MultiLingualRes.LoginScreenTitle:"/LoginModule/Reset"==b&&(angular.element(window.document)[0].title=h.MultiLingualRes.ResetPWDTitle),a.LangPacks.SelectedKey.Key=h.SelectedLang}function r(a){var b=i.GetMultiLingualResSer(a);b.then(function(b){var c=angular.fromJson(b.data);null!=c&&void 0!=c&&(h.MultiLingualRes=c,h.SelectedLang=a,q())})}function s(){a.LangPacks={Options:[{Key:"en",Name:"English"},{Key:"cn",Name:"简体中文"},{Key:"tw",Name:"繁體中文"},{Key:"esve",Name:"Español - Venezuela"}],SelectedKey:{Key:"en",Name:"English"}},q();var b=e.path();if("/LoginModule/Reset"==b){var c=new n;angular.isUndefined(h.MultiLingualRes)||(c.PageTitle=h.MultiLingualRes.ResetPWDTitle||"",c.MsgsStr=h.MultiLingualRes.E025||""),c.GetUserInfo(),a.LoginUserModel=j.GetEntityByID_Result().Entity_LoginUserVM}else"/LoginModule/Login"==b&&(a.LoginUserModel=j.GetEmptyLoginUserVM_Result())}s(),a.ChangeLang=function(a){r(a)},a.IsEnable_DoLogin=!0,a.DoLogin=function(){a.IsEnable_DoLogin=!1;var c={entityInst:a.LoginUserModel,str_Language:a.LangPacks.SelectedKey.Key,str_IpAdd:"",str_HostName:""},d=j.Login(c);d.then(function(c){var d=new l(c.data);if(d.HasError())throw a.IsEnable_DoLogin=!0,new ExcetionInst(ExceptionType.ValidationError,e.path(),h.MultiLingualRes.LoginScreenTitle,d.GetErrMsgs());var f={WCFToken:d.Str_ServerToken,UserId:d.Entity_SessionWUserInfo.ID},g=new n;g.SetUserInfo(f);a.IsEnable_DoLogin=!0,d.PwdExpire()?b.go("LoginModule.Reset"):b.go("Main.Home.IndexPart1")})},a.IsEnable_Reset=!0,a.Reset=function(){a.IsEnable_Reset=!1;var c=new o;c.initData(),a.LoginUserModel.ID=c.GetUserId();var d={entity_WCFAuthInfoVM:c,entity_LUVM:a.LoginUserModel};j.ResetPwd(d).then(function(c){if(!angular.isUndefined(c)&&null!=c){var d=new p(c.data);if(d.HasError())throw a.IsEnable_Reset=!0,new ExcetionInst(ExceptionType.ValidationError,e.path(),h.MultiLingualRes.ResetPWDTitle,d.GetErrMsgs());a.IsEnable_Reset=!0,b.go("Main.Home.IndexPart1")}})}};d.$inject=c,angular.module("LoginModule").controller("LoginController",d)}(),function(){"use strict";var a=["CustomStateProvider"],b=function(a){a.AddState(Path.FunsPath,"LoginUserManage","",{initData:["WCFAuthInfoVM","LoginUserMgtSer",function(a,b){var c=new a;return c.initData(),b.GetEmptyLoginUserVM(c)}],initAuthInfo:["WCFAuthInfoVM","LoginUserMgtSer",function(a,b){var c=new a;return c.initData(),b.GetAuthInfo(c)}]}),a.AddState(Path.FunsPath,"LoginUserManage","Edit",{initData:["$stateParams","WCFAuthInfoVM","LoginUserMgtSer",function(a,b,c){var d=new b;d.initData(),d.SetFunKeyAndTypeKey("LoginUserManage","Edit");var e={entity_WCFAuthInfoVM:d,str_LUID:a.LUID};return c.GetEntityByIDWDetails(e)}],initData_Funs:["WCFAuthInfoVM","FunMgtSerClient",function(a,b){var c=new a;return c.initData(),b.GetAll(c)}],initData_Roles:["WCFAuthInfoVM","RoleMgtSerClient",function(a,b){var c=new a;return c.initData(),b.GetAll(c)}],initData_Orgs:["WCFAuthInfoVM","OrgMgtSerClient",function(a,b){var c=new a;return c.initData(),b.GetAll(c)}],initData_OrgDetails:["WCFAuthInfoVM","OrgDetailMgtSerClient",function(a,b){var c=new a;return c.initData(),b.GetAll(c)}],initAuthInfo:["WCFAuthInfoVM","LoginUserMgtSer",function(a,b){var c=new a;return c.initData(),b.GetAuthInfo(c)}]},"/:LUID"),a.AddState(Path.FunsPath,"LoginUserManage","Create",{initData:["WCFAuthInfoVM","LoginUserMgtSer",function(a,b){var c=new a;return c.initData(),b.GetEmptyLoginUserVM(c)}],initData_Funs:["WCFAuthInfoVM","FunMgtSerClient",function(a,b){var c=new a;return c.initData(),b.GetAll(c)}],initData_Roles:["WCFAuthInfoVM","RoleMgtSerClient",function(a,b){var c=new a;return c.initData(),b.GetAll(c)}],initData_Orgs:["WCFAuthInfoVM","OrgMgtSerClient",function(a,b){var c=new a;return c.initData(),b.GetAll(c)}],initData_OrgDetails:["WCFAuthInfoVM","OrgDetailMgtSerClient",function(a,b){var c=new a;return c.initData(),b.GetAll(c)}],initAuthInfo:["WCFAuthInfoVM","LoginUserMgtSer",function(a,b){var c=new a;return c.initData(),b.GetAuthInfo(c)}]})};b.$inject=a,angular.module("MainModule").config(b);var c=["$scope","$q","$filter","$stateParams","$location","$sessionStorage","$state","WCFAuthInfoVM","ClientSessionMgt","LoginUserMgtSer","FunMgtSerClient","RoleMgtSerClient","OrgMgtSerClient","OrgDetailMgtSerClient","CheckPrivilegeSerClient","WCFReturnResult","WCFErrorContract","MsgBoxModel"],d=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){function s(a,c){var d=b.defer(),e=new h;e.initData(),e.SetFunKeyAndTypeKey("LoginUserManage",c);var f=j.GetAuthInfo_Result(),g=null;angular.isUndefined(f)||null==f||angular.forEach(f.EntityList_FDInfo,function(a,b){return"LoginUserManage"==a.FKey?void(g=a):void 0});var i=[];if(null!=g&&g.FTName.indexOf(c)>-1&&g.OrgPath.length>0){var k=g.FTName.indexOf(c);g.FDSelected[k]&&angular.forEach(g.OrgPath[k].Value,function(a,b){i.push(a)})}a.entity_WCFAuthInfoVM=e;var l={entity_WCFAuthInfoVM:e,strList_OrgPath:i};return j.GetLUIDList(l).then(function(b){a.guidList_AccessedLUserID=b.data,j.GetListWithPaging(a).then(function(a){d.resolve(a)},function(a){d.reject(a)})}),d.promise}function t(){angular.isUndefined(f.MultiLingualRes)||null==f.MultiLingualRes||(a.Captions={SearchCriteria:f.MultiLingualRes.SearchCriteria,List:f.MultiLingualRes.List,LoginUserManage_Create:f.MultiLingualRes.LoginUserManage_Create,LoginUserManage_Edit:f.MultiLingualRes.LoginUserManage_Edit,Operation:f.MultiLingualRes.Operation,Delete:f.MultiLingualRes.Delete,Edit:f.MultiLingualRes.Edit,Search:f.MultiLingualRes.Search,Save:f.MultiLingualRes.Save,CreateDate:f.MultiLingualRes.CreateDate,LastLoginDT:f.MultiLingualRes.LastLoginDT,RoleName:f.MultiLingualRes.RoleName,OrganizationKey:f.MultiLingualRes.OrganizationKey,BacktoList:f.MultiLingualRes.BacktoList,Reset:f.MultiLingualRes.Reset,LoginName:f.MultiLingualRes.LoginName,UserType:f.MultiLingualRes.UserType,LoginPwd:f.MultiLingualRes.LoginPwd,LoginConfirmPwd:f.MultiLingualRes.LoginConfirmPwd,Status:f.MultiLingualRes.Status,Active:f.MultiLingualRes.Active,InActive:f.MultiLingualRes.InActive,Suspend:f.MultiLingualRes.Suspend,NormalUserID:f.MultiLingualRes.NormalUserID,All:f.MultiLingualRes.All,SpecificFunctions:f.MultiLingualRes.SpecificFunctions,AsRoleSetting:f.MultiLingualRes.AsRoleSetting,AsOrgSetting:f.MultiLingualRes.AsOrgSetting,E019:f.MultiLingualRes.E019},w=g.includes("Main.LoginUserManage.Edit")?f.MultiLingualRes.LoginUserManage_Edit:g.includes("Main.LoginUserManage.Create")?f.MultiLingualRes.LoginUserManage_Create:f.MultiLingualRes.LoginUserManage,angular.element(window.document)[0].title=w);var c=new i;c.PageTitle=w;var r=c.GetSystemInfo();a.SystemInfo=r;var t=new h;if(t.initData(),g.includes("Main.LoginUserManage.Edit")){a.EditId=d.LUID;var x=j.GetEntityByIDWDetails_Result();if(!angular.isUndefined(x)&&null!=x){var y=new p(x),z=y.GetErrMsgs();if(y.HasMsgs())throw new ExcetionInst(ExceptionType.AccessDenied,e.path(),w,z);a.EntityLoginUser=y.Entity_LoginUserVM,a.DisplayPageNum=a.SystemInfo.DisplayPageNum,a.PageSize=a.SystemInfo.PageSize,a.FunsList=k.GetAll_Result(),a.RolesList=l.GetAll_Result();var A=m.GetAll_Result(),B=j.GetAuthInfo_Result(),A=j.GetOrgIDList(B,"LoginUserManage","Edit",A);if(a.UserType=B.UserType,a.OrgList=A,a.OrgDetailList=n.GetAll_Result(),1==a.EntityLoginUser.UserType){var C=a.EntityLoginUser.EntityList_FDInfo;angular.isUndefined(C)||null==C||(a.SpeFunDetailList=C),a.SpeRoleDetailList=[],a.OrgSettingList=[]}else if(2==a.EntityLoginUser.UserType){var D=a.EntityLoginUser.roleListIDList,E=D.split("|");a.SpeRoleDetailList=[],angular.forEach(E,function(b,c){angular.forEach(a.RolesList,function(c,d){c.ID==b&&a.SpeRoleDetailList.push(c)})}),a.SpeFunDetailList=[],a.OrgSettingList=[]}else if(3==a.EntityLoginUser.UserType){var F=a.EntityLoginUser.orgListIDList,G=a.EntityLoginUser.orgDetailsIDList;if(a.OrgSettingList=[],!angular.isUndefined(F)&&null!=F&&!angular.isUndefined(G)&&null!=G){var H=F.split("|"),I=G.split("|");angular.forEach(H,function(b,c){angular.forEach(a.OrgList,function(c,d){if(c.ID==b){var e={};e.Org_ID=c.ID,e.Org_Path=c.OrganizationPath,e.Org_Key=c.OrganizationKey,e.Org_Name=c.OrganizationName,e.Org_AllowEdit=c.AllowEdit,e.Org_AllowDel=c.AllowDel,a.OrgSettingList.push(e)}})}),angular.forEach(I,function(b,c){angular.forEach(a.OrgDetailList,function(d,e){if(d.ID==b){var f=a.OrgSettingList[c];f.OrgDetail_ID=d.ID,f.OrgDetail_Key=d.OrgDetailsKey,f.OrgDetail_Type=d.OrgDetailsType,f.OrgDetail_TypeName=d.OrgDetailsTypeName,f.OrgDetail_AllowEdit=d.AllowEdit,f.OrgDetail_AllowDel=d.AllowDel}})})}a.SpeRoleDetailList=[],a.SpeFunDetailList=[]}a.msgBoxTitle=w}}else if(g.includes("Main.LoginUserManage.Create")){var y=new p(j.GetEmptyLoginUserVM_Result()),z=y.GetErrMsgs();if(y.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,e.path(),w,z);a.EntityLoginUser=y,a.EntityLoginUser.Status=1,a.EntityLoginUser.UserType=1,a.DisplayPageNum=a.SystemInfo.DisplayPageNum,a.PageSize=a.SystemInfo.PageSize,a.FunsList=k.GetAll_Result(),a.SpeFunDetailList=[],a.RolesList=l.GetAll_Result(),a.SpeRoleDetailList=[],a.OrgSettingList=[];var A=m.GetAll_Result(),B=j.GetAuthInfo_Result();a.UserType=B.UserType,3==a.UserType&&(a.EntityLoginUser.UserType=B.UserType);var A=j.GetOrgIDList(B,"LoginUserManage","Create",A);a.OrgList=A,a.OrgDetailList=n.GetAll_Result(),a.msgBoxTitle=w}else{a.DisplayPageNum=a.SystemInfo.DisplayPageNum,a.PageSize=a.SystemInfo.PageSize,a.DateTimeFormat=a.SystemInfo.DateFormat+" "+a.SystemInfo.TimeFormat,a.Sort=a.Sort||"",a.SortDir=a.SortDir||"",a.reverse="desc"==a.SortDir;var y=new p(j.GetEmptyLoginUserVM_Result()),z=y.GetErrMsgs();if(y.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,e.path(),w,z);a.EntityLoginUser=y,a.Sort=a.Sort||a.EntityLoginUser.DefaultSortColumn,a.SortDir=a.SortDir||a.EntityLoginUser.DefaultSortDir,a.reverse="desc"==a.SortDir;var J={entity_WCFAuthInfoVM:void 0,entity_SearchCriteria:null,int_CurrentPage:1,int_PageSize:2147483647,str_SortColumn:"",str_SortDir:"",str_CustomFilter:"",guidList_AccessedLUserID:[]},K=s(J,"View"),t=new h;t.initData(),t.SetFunKeyAndTypeKey("LoginUserManage","Create");var L={entity_WCFAuthInfoVM:t,isCheckFunType:!0},M=o.CheckPrivilege(L);b.all([K,M]).then(function(b){var c=new p(b[0].data),d=b[1].data;a.CheckPrivilege_Create=d;c.GetErrMsgs();if(c.HasMsgs())throw new ExcetionInst(ExceptionType.ValidationError,e.path(),w,C.GetErrMsgs());for(var f=0;f<c.EntityList_LoginUserVM.length;++f)angular.isUndefined(c.EntityList_LoginUserVM[f].CreateDate)||null==c.EntityList_LoginUserVM[f].CreateDate||(c.EntityList_LoginUserVM[f].CreateDate=moment(c.EntityList_LoginUserVM[f].CreateDate).toDate()),angular.isUndefined(c.EntityList_LoginUserVM[f].LastLoginDT)||null==c.EntityList_LoginUserVM[f].LastLoginDT||(c.EntityList_LoginUserVM[f].LastLoginDT=moment(c.EntityList_LoginUserVM[f].LastLoginDT).toDate());a.EntityList_LoginUserVM=c.EntityList_LoginUserVM,a.LoginUserList=u(a.EntityList_LoginUserVM,a.Sort,a.reverse),angular.isUndefined(a.EntityLoginUser.UserType)||null==a.EntityLoginUser.UserType||(a.LoginUserList=v(a.LoginUserList,{UserType:a.EntityLoginUser.UserType})),a.LoginUserList=v(a.LoginUserList,{LoginName:a.EntityLoginUser.LoginName}),a.LoginUserList=v(a.LoginUserList,{StrRoles:a.EntityLoginUser.StrRoles}),a.LoginUserList=v(a.LoginUserList,{StrOrgs:a.EntityLoginUser.StrOrgs}),a.CurrPageIndex=1,a.TotalCount=a.LoginUserList.length,a.LoginUserList=a.LoginUserList.slice(a.PageSize*(a.CurrPageIndex-1),a.PageSize*a.CurrPageIndex)},function(a){var b=new q(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,e.path(),w,b.StrMsg,b.StrTraceMsg)})}}var u=c("orderBy"),v=c("filter"),w="";t(),a.Search=function(){a.EntityList_LoginUserVM.length>0&&(a.LoginUserList=u(a.EntityList_LoginUserVM,a.Sort,a.reverse),angular.isUndefined(a.EntityLoginUser.UserType)||null==a.EntityLoginUser.UserType||(a.LoginUserList=v(a.LoginUserList,{UserType:a.EntityLoginUser.UserType})),a.LoginUserList=v(a.LoginUserList,{LoginName:a.EntityLoginUser.LoginName}),a.LoginUserList=v(a.LoginUserList,{StrRoles:a.EntityLoginUser.StrRoles}),a.LoginUserList=v(a.LoginUserList,{StrOrgs:a.EntityLoginUser.StrOrgs}),a.CurrPageIndex=1,a.TotalCount=a.LoginUserList.length,a.LoginUserList=a.LoginUserList.slice(a.PageSize*(a.CurrPageIndex-1),a.PageSize*a.CurrPageIndex))},a.isChangePwd=!1,a.ClickChangePwd=function(){a.isChangePwd=!a.isChangePwd},a.Delete=function(a){w=f.MultiLingualRes.LoginUserManage_Delete;var b=new r;b.OpenLoadingDialog();var c=new h;c.initData(),c.SetFunKeyAndTypeKey("LoginUserManage","Delete");var d={entity_WCFAuthInfoVM:c,str_LUID:a};j.Delete(d).then(function(a){if(!angular.isUndefined(a)&&null!=a){var c=new p(a.data);if(c.HasError())throw b.CloseLoadingDialog(),new ExcetionInst(ExceptionType.ValidationError,e.path(),w,c.GetErrMsgs());g.includes("Main.LoginUserManage.Edit")?g.go("Main.LoginUserManage",{},{reload:!0}):g.reload(),b.ShowMsg(BootstrapDialog.TYPE_SUCCESS,w||"",f.MultiLingualRes.I001||""),b.CloseLoadingDialog()}},function(a){var b=new q(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,e.path(),w,b.StrMsg,b.StrTraceMsg)})},a.Edit=function(){var b=new r;b.OpenLoadingDialog();var c=new h;if(c.initData(),c.SetFunKeyAndTypeKey("LoginUserManage","Edit"),a.EntityLoginUser.isChangePwd=a.isChangePwd,1==a.EntityLoginUser.UserType)a.EntityLoginUser.EntityList_FDInfo=a.SpeFunDetailList;else if(2==a.EntityLoginUser.UserType)a.EntityLoginUser.EntityList_Role=a.SpeRoleDetailList;else if(3==a.EntityLoginUser.UserType){var d=[],i=[];angular.forEach(a.OrgSettingList,function(a,b){d.push(a.Org_ID),i.push(a.OrgDetail_ID)}),a.EntityLoginUser.orgListIDList=d.join("|"),a.EntityLoginUser.orgDetailsIDList=i.join("|")}var k={entity_WCFAuthInfoVM:c,entity_LUVM:a.EntityLoginUser};j.Update(k).then(function(a){if(!angular.isUndefined(a)&&null!=a){var c=new p(a.data),d=c.GetErrMsgs();if(c.HasMsgs())throw b.CloseLoadingDialog(),new ExcetionInst(ExceptionType.ValidationError,e.path(),w,d);g.reload(),b.ShowMsg(BootstrapDialog.TYPE_SUCCESS,w||"",f.MultiLingualRes.I000||""),b.CloseLoadingDialog()}},function(a){var b=new q(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,e.path(),w,b.StrMsg,b.StrTraceMsg)})},a.Create=function(){var b=new r;b.OpenLoadingDialog();var c=new h;if(c.initData(),c.SetFunKeyAndTypeKey("LoginUserManage","Create"),1==a.EntityLoginUser.UserType)a.EntityLoginUser.EntityList_FDInfo=a.SpeFunDetailList;else if(2==a.EntityLoginUser.UserType)a.EntityLoginUser.EntityList_Role=a.SpeRoleDetailList;else if(3==a.EntityLoginUser.UserType){var d=[],i=[];angular.forEach(a.OrgSettingList,function(a,b){d.push(a.Org_ID),i.push(a.OrgDetail_ID)}),a.EntityLoginUser.orgListIDList=d.join("|"),a.EntityLoginUser.orgDetailsIDList=i.join("|")}var k={entity_WCFAuthInfoVM:c,entity_LUVM:a.EntityLoginUser};j.Create(k).then(function(a){if(!angular.isUndefined(a)&&null!=a){var c=new p(a.data),d=c.GetErrMsgs();if(c.HasMsgs())throw b.CloseLoadingDialog(),new ExcetionInst(ExceptionType.ValidationError,e.path(),w,d);g.go("Main.LoginUserManage",{},{reload:!0}),b.ShowMsg(BootstrapDialog.TYPE_SUCCESS,w||"",f.MultiLingualRes.I000||""),b.CloseLoadingDialog()}},function(a){var b=new q(a.data);throw new ExcetionInst(ExceptionType.RestServiceError,e.path(),w,b.StrMsg,b.StrTraceMsg)})},a.SortBy=function(b){a.reverse=!0,a.Sort==b?(a.SortDir="desc"==a.SortDir?"asc":"desc",a.reverse="desc"==a.SortDir):(a.Sort=b,a.SortDir="asc",a.reverse=!1),a.EntityList_LoginUserVM.length>0&&(a.LoginUserList=u(a.EntityList_LoginUserVM,a.Sort,a.reverse),angular.isUndefined(a.EntityLoginUser.UserType)||null==a.EntityLoginUser.UserType||(a.LoginUserList=v(a.LoginUserList,{UserType:a.EntityLoginUser.UserType})),a.LoginUserList=v(a.LoginUserList,{LoginName:a.EntityLoginUser.LoginName}),a.LoginUserList=v(a.LoginUserList,{StrRoles:a.EntityLoginUser.StrRoles}),a.LoginUserList=v(a.LoginUserList,{StrOrgs:a.EntityLoginUser.StrOrgs}),a.TotalCount=a.LoginUserList.length,a.LoginUserList=a.LoginUserList.slice(a.PageSize*(a.CurrPageIndex-1),a.PageSize*a.CurrPageIndex))},a.PageIndexChange=function(b){a.EntityList_LoginUserVM.length>0&&(a.LoginUserList=u(a.EntityList_LoginUserVM,a.Sort,a.reverse),angular.isUndefined(a.EntityLoginUser.UserType)||null==a.EntityLoginUser.UserType||(a.LoginUserList=v(a.LoginUserList,{UserType:a.EntityLoginUser.UserType})),a.LoginUserList=v(a.LoginUserList,{LoginName:a.EntityLoginUser.LoginName}),a.LoginUserList=v(a.LoginUserList,{StrRoles:a.EntityLoginUser.StrRoles}),a.LoginUserList=v(a.LoginUserList,{StrOrgs:a.EntityLoginUser.StrOrgs}),a.CurrPageIndex=b,a.TotalCount=a.LoginUserList.length,a.LoginUserList=a.LoginUserList.slice(a.PageSize*(a.CurrPageIndex-1),a.PageSize*a.CurrPageIndex))}};d.$inject=c,angular.module("LoginModule").controller("LoginUserManageController",d)}(),function(){"use strict";var a=["$stateProvider","$urlRouterProvider","CustomStateProvider"],b=function(a,b,c){a.state("Main",{url:"/Main",views:{"@":{templateUrl:Path.MainPath+"Main.tpl.html",controller:"MainController"}},resolve:{GetMenuByAuthInfo:["$rootScope","FunMgtSerClient","WCFAuthInfoVM",function(a,b,c){var d=new c;return d.initData(),b.GetMenuByAuthInfo(d)}]}}),c.AddState(Path.FunsPath,"SystemInfoManage","",null)};b.$inject=a,angular.module("MainModule").config(b);var c=["$scope","$state","$sessionStorage","CustomState","FunMgtSerClient","WCFAuthInfoVM","LoginUserMgtSer","WCFReturnResult","ClientSessionMgt","MsgBoxModel"],d=function(a,b,c,d,e,f,g,h,i,j){function k(){l=e.GetMenuByAuthInfo_Result(),a.MenuItems=l.Json_MenuItems}k();var l={};angular.isUndefined(c.MultiLingualRes)||null==c.MultiLingualRes||(a.MultiLang=c.MultiLingualRes),a.Logout=function(){var a=new j;a.OpenLoadingDialog();var d=new f;d.initData(),g.Logout(d).then(function(d){if(!angular.isUndefined(d)&&null!=d){var e=new h(d.data);if(e.HasError())throw new ExcetionInst(ExceptionType.ValidationError,$location.path(),c.MultiLingualRes.ResetPWDTitle,e.GetErrMsgs());var f=new i;f.ClearUserInfo(),a.ShowMsg(BootstrapDialog.TYPE_SUCCESS,c.MultiLingualRes.Logout||"",c.MultiLingualRes.I003||""),b.go("LoginModule.Login")}a.CloseLoadingDialog()})}};d.$inject=c,angular.module("MainModule").controller("MainController",d)}(),function(){"use strict";var a=["$scope","$cookies","$state","$sessionStorage","$location","WCFAuthInfoVM","StaticContentModel","SystemInfoRestfulSer","ClientSessionMgt","SystemInfoVM","WCFReturnResult","MsgBoxModel"],b=function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){var b="";angular.isUndefined(d.MultiLingualRes)||null==d.MultiLingualRes||(a.Captions={SessionTimeoutSeconds:d.MultiLingualRes.SessionTimeoutSeconds,PageSize:d.MultiLingualRes.PageSize,DisplayPageNum:d.MultiLingualRes.DisplayPageNum,DateFormat:d.MultiLingualRes.DateFormat,TimeFormat:d.MultiLingualRes.TimeFormat,Password_Policy:d.MultiLingualRes.Password_Policy,MaximumLoginAttempts:d.MultiLingualRes.MaximumLoginAttempts,Password_Length:d.MultiLingualRes.Password_Length,From:d.MultiLingualRes.From,To:d.MultiLingualRes.To,Password_ReuseNum:d.MultiLingualRes.Password_ReuseNum,Password_ExpireDays:d.MultiLingualRes.Password_ExpireDays,Password_IncludeDiffCase:d.MultiLingualRes.Password_IncludeDiffCase,Password_IncludeNumDigit:d.MultiLingualRes.Password_IncludeNumDigit,Password_IncludeSpecialChar:d.MultiLingualRes.Password_IncludeSpecialChar,Save:d.MultiLingualRes.Save},b=d.MultiLingualRes.SystemInfoManage,angular.element(window.document)[0].title=d.MultiLingualRes.SystemInfoManage);var c=new i;c.PageTitle=b,a.SystemInfo=c.GetSystemInfo(),$(".input-group.spinner").spinner("step",function(a){})}m(),a.Save=function(){var c=new l;c.OpenLoadingDialog();var i=new f;i.initData(),i.SetFunKeyAndTypeKey("SystemInfoManage","Edit");var m={entity_WCFAuthInfoVM:i,entity_SysVM:a.SystemInfo};h.Update(m).then(function(a){var i=new k(a.data);if(i.HasError())throw c.CloseLoadingDialog(),new ExcetionInst(ExceptionType.ValidationError,e.path(),d.MultiLingualRes.SystemInfoManage,i.GetErrMsgs());new g;h.GetSystemInfo(new f).then(function(a){var e=new j(a.data);b.putObject(Keys.SystemInfo_CookiesKey,e),c.ShowMsg(BootstrapDialog.TYPE_SUCCESS,d.MultiLingualRes.SystemInfoManage||"",d.MultiLingualRes.I000||"")}),c.CloseLoadingDialog()})}};b.$inject=a,angular.module("MainModule").controller("SystemInfoManageController",b)}(),function(){"use strict";var a=["CustomStateProvider"],b=function(a){a.AddState(Path.SamplePath,"AttendanceModule","",{})};b.$inject=a,angular.module("MainModule").config(b);var c=["$scope","$q","$filter","$stateParams","$sessionStorage","$state","WCFAuthInfoVM","ClientSessionMgt","WCFReturnResult","WCFErrorContract","MsgBoxModel"],d=function(a,b,c,d,e,f,g,h,i,j,k){function l(){angular.isUndefined(e.MultiLingualRes)||null==e.MultiLingualRes||(m=e.MultiLingualRes.AttendanceModule,a.AttendanceModule=m,angular.element(window.document)[0].title=m)}var m="";l()};d.$inject=c,angular.module("MainModule").controller("AttendanceModuleController",d)}(),function(){"use strict";var a=["CustomStateProvider"],b=function(a){a.AddState(Path.SamplePath,"LeaveModule","",{})};b.$inject=a,angular.module("MainModule").config(b);var c=["$scope","$q","$filter","$stateParams","$sessionStorage","$state","WCFAuthInfoVM","ClientSessionMgt","WCFReturnResult","WCFErrorContract","MsgBoxModel"],d=function(a,b,c,d,e,f,g,h,i,j,k){function l(){angular.isUndefined(e.MultiLingualRes)||null==e.MultiLingualRes||(m=e.MultiLingualRes.LeaveModule,a.LeaveModule=m,angular.element(window.document)[0].title=m)}var m="";l()};d.$inject=c,angular.module("MainModule").controller("LeaveModuleController",d)}(),function(){"use strict";var a=["CustomStateProvider"],b=function(a){a.AddState(Path.SamplePath,"MaintainSalaryInfo","",{})};b.$inject=a,angular.module("MainModule").config(b);var c=["$scope","$q","$filter","$stateParams","$sessionStorage","$state","WCFAuthInfoVM","ClientSessionMgt","WCFReturnResult","WCFErrorContract","MsgBoxModel"],d=function(a,b,c,d,e,f,g,h,i,j,k){function l(){angular.isUndefined(e.MultiLingualRes)||null==e.MultiLingualRes||(m=e.MultiLingualRes.MaintainSalaryInfo,a.MaintainSalaryInfo=m,angular.element(window.document)[0].title=m)}var m="";l()};d.$inject=c,angular.module("MainModule").controller("MaintainSalaryInfoController",d)}(),function(){"use strict";var a=["CustomStateProvider"],b=function(a){a.AddState(Path.SamplePath,"SalaryReview","",{})};b.$inject=a,angular.module("MainModule").config(b);var c=["$scope","$q","$filter","$stateParams","$sessionStorage","$state","WCFAuthInfoVM","ClientSessionMgt","WCFReturnResult","WCFErrorContract","MsgBoxModel"],d=function(a,b,c,d,e,f,g,h,i,j,k){function l(){angular.isUndefined(e.MultiLingualRes)||null==e.MultiLingualRes||(m=e.MultiLingualRes.SalaryReview,a.SalaryReview=m,angular.element(window.document)[0].title=m)}var m="";l()};d.$inject=c,angular.module("MainModule").controller("SalaryReviewController",d)}(),function(){"use strict";var a=["CustomStateProvider"],b=function(a){a.AddState(Path.SamplePath,"StaffInfoManage","",{})};b.$inject=a,angular.module("MainModule").config(b);var c=["$scope","$q","$filter","$stateParams","$sessionStorage","$state","WCFAuthInfoVM","ClientSessionMgt","WCFReturnResult","WCFErrorContract","MsgBoxModel"],d=function(a,b,c,d,e,f,g,h,i,j,k){function l(){angular.isUndefined(e.MultiLingualRes)||null==e.MultiLingualRes||(m=e.MultiLingualRes.StaffInfoManage,a.StaffInfoManage=m,angular.element(window.document)[0].title=m)}var m="";l()};d.$inject=c,angular.module("MainModule").controller("StaffInfoManageController",d)}(),function(){"use strict";var a=["$sessionStorage","$filter","$location","FunMgtSerClient","WCFAuthInfoVM","WCFReturnResult","WCFErrorContract","$compile","$templateCache"],b=function(a,b,c,d,e,f,g,h,i){function j(g,h,i,j){var k=b("orderBy"),l=b("filter");angular.isUndefined(a.MultiLingualRes)||null==a.MultiLingualRes||(g.funlist={},g.funlist.Captions={},g.funlist.Captions.First=a.MultiLingualRes.First,g.funlist.Captions.Prev=a.MultiLingualRes.Prev,g.funlist.Captions.Next=a.MultiLingualRes.Next,g.funlist.Captions.Last=a.MultiLingualRes.Last,g.funlist.Captions.SpecificFunctions=a.MultiLingualRes.SpecificFunctions,g.funlist.Captions.FunctionKey=a.MultiLingualRes.FunctionKey,g.funlist.Captions.FunctionName=a.MultiLingualRes.FunctionName,g.funlist.Captions.Operation=a.MultiLingualRes.Operation,g.funlist.Captions.Edit=a.MultiLingualRes.Edit,g.funlist.Captions.Delete=a.MultiLingualRes.Delete,g.funlist.Captions.FunctionType=a.MultiLingualRes.FunctionType,g.funlist.Captions.Add=a.MultiLingualRes.Add,g.funlist.Captions.Save=a.MultiLingualRes.Save,g.funlist.Captions.E019=a.MultiLingualRes.E019,g.funlist.Captions.SearchCriteria=a.MultiLingualRes.SearchCriteria),g.TotalCount=angular.isUndefined(g.spefundetaillist)||null==g.spefundetaillist?0:g.spefundetaillist.length,g.CurrPageIndex=g.CurrPageIndex?g.CurrPageIndex:1,g.Sort=g.Sort?g.Sort:"FKey",g.SortDir=g.SortDir?g.SortDir:"asc",g.reverse="desc"==g.SortDir,g.isEditMode=angular.isUndefined(g.isEditMode)||null==g.isEditMode?!1:g.isEditMode,g.Search=function(){g.FunSelList=k(g.spefundetaillist,g.Sort,g.reverse),g.FunSelList=l(g.FunSelList,{FKey:g.FilterFunctionKey}),g.FunSelList=l(g.FunSelList,{FName:g.FilterFunctionName}),g.TotalCount=g.FunSelList.length,g.FunSelList=g.FunSelList.slice(g.pagesize*(g.CurrPageIndex-1),g.pagesize*g.CurrPageIndex)},g.SortBy=function(a){g.reverse=!0,g.Sort==a?(g.SortDir="desc"==g.SortDir?"asc":"desc",g.reverse="desc"==g.SortDir):(g.Sort=a,g.SortDir="asc",g.reverse=!1),g.FunSelList=k(g.spefundetaillist,g.Sort,g.reverse),g.FunSelList=l(g.FunSelList,{FKey:g.FilterFunctionKey}),g.TotalCount=g.FunSelList.length,g.FunSelList=g.FunSelList.slice(g.pagesize*(g.CurrPageIndex-1),g.pagesize*g.CurrPageIndex)},g.SelectFunDetail=function(a){g.isEditMode=!0,angular.forEach(g.spefundetaillist,function(b,c){b.FID==a&&(g.SelFunDetailInfo=b,g.SelectedFun=a,g.EditIndex=c)});var b=!0;angular.forEach(g.SelFunDetailInfo.FDSelected,function(a,c){return a?void 0:void(b=!1)}),g.isCheckAll=b},g.DelFunDetail=function(a){angular.forEach(g.spefundetaillist,function(b,c){b.FID==a&&g.spefundetaillist.splice(c,1)}),g.PageIndexChange(1)},g.AddFunDetail=function(){var b=!0;if(angular.forEach(g.spefundetaillist,function(a,c){a.FID==g.SelectedFun&&(b=!1)}),!b){var d=a.MultiLingualRes.E002.replace("{0}",g.SelFunDetailInfo.FName);throw g.SelFunDetailInfo={},g.SelectedFun="",g.isCheckAll=!1,new ExcetionInst(ExceptionType.ValidationError,c.path(),g.msgboxtitle,d)}var e=!1;if(angular.forEach(g.SelFunDetailInfo.FDSelected,function(a,b){return a?void(e=!0):void 0}),!e){var d=a.MultiLingualRes.E026;throw g.SelFunDetailInfo={},g.SelectedFun="",g.isCheckAll=!1,new ExcetionInst(ExceptionType.ValidationError,c.path(),g.msgboxtitle,d)}g.spefundetaillist.push(g.SelFunDetailInfo),g.PageIndexChange(1),g.SelFunDetailInfo={},g.SelectedFun="",g.isCheckAll=!1},g.EditFunDetail=function(){var b=!0;if(angular.forEach(g.spefundetaillist,function(a,c){a.FID==g.SelectedFun&&g.EditIndex!=c&&(b=!1)}),!b){var d=a.MultiLingualRes.E002.replace("{0}",g.SelFunDetailInfo.FName);throw g.SelFunDetailInfo={},g.SelectedFun="",g.isCheckAll=!1,g.isEditMode=!1,new ExcetionInst(ExceptionType.ValidationError,c.path(),g.msgboxtitle,d)}var e=!1;if(angular.forEach(g.SelFunDetailInfo.FDSelected,function(a,b){return a?void(e=!0):void 0}),!e){var d=a.MultiLingualRes.E026;throw g.SelFunDetailInfo={},g.SelectedFun="",g.isCheckAll=!1,new ExcetionInst(ExceptionType.ValidationError,c.path(),g.msgboxtitle,d)}g.spefundetaillist[g.EditIndex]=g.SelFunDetailInfo,g.PageIndexChange(1),g.SelFunDetailInfo={},g.SelectedFun="",g.isCheckAll=!1,g.isEditMode=!1},g.SelectFun=function(a){var b=new e;b.initData();var c={entity_WCFAuthInfoVM:b,str_FunID:a};d.GetFunDetailInfo_FID(c).then(function(a){var b=new f(a.data);g.SelFunDetailInfo=b},function(a){}),g.isCheckAll=!1},g.CheckAllFunType=function(){angular.forEach(g.SelFunDetailInfo.FDSelected,function(a,b){g.SelFunDetailInfo.FDSelected[b]=g.isCheckAll})},g.CheckFunType=function(){var a=!0;angular.forEach(g.SelFunDetailInfo.FDSelected,function(b,c){return b?void 0:void(a=!1)}),g.isCheckAll=a},g.PageIndexChange=function(a){g.spefundetaillist.length>0?(g.FunSelList=k(g.spefundetaillist,g.Sort,g.reverse),g.FunSelList=l(g.FunSelList,{FKey:g.FilterFunctionKey}),g.FunSelList=l(g.FunSelList,{FName:g.FilterFunctionName}),g.CurrPageIndex=a,g.TotalCount=g.FunSelList.length,g.FunSelList=g.FunSelList.slice(g.pagesize*(g.CurrPageIndex-1),g.pagesize*g.CurrPageIndex)):(g.FunSelList=[],g.CurrPageIndex=a,g.TotalCount=g.FunSelList.length)},g.spefundetaillist.length>0&&g.PageIndexChange(1)}var k={link:j,restrict:"E",replace:!0,scope:{spefundetaillist:"=",funslist:"=",displaypagenum:"=",pagesize:"=",msgboxtitle:"="},templateUrl:"SpecificFunList.html"};return k};b.$inject=a,angular.module("MainModule").directive("funlistdirective",b)}(),function(){"use strict";var a=["FunMgtSerClient","WCFAuthInfoVM","WCFReturnResult","WCFErrorContract","$compile","$templateCache"],b=function(a,b,c,d,e,f){function g(a,b,c,d){a.isLel1Menu=!a.issubmenu,a.HasSubItem=angular.isArray(a.menuitems),b.replaceWith(e(f.get("MenuRecursive.html"))(a))}var h={link:g,restrict:"E",scope:{menuitems:"=",issubmenu:"="}};return h};b.$inject=a,angular.module("MainModule").directive("menubar",b)}(),function(){"use strict";var a=["$state","$sessionStorage","WCFAuthInfoVM","WCFReturnResult","WCFErrorContract"],b=function(a,b,c,d,e){function f(c,d,e,f){var g=a.$current;if(!angular.isUndefined(b.MultiLingualRes)&&null!=b.MultiLingualRes&&!angular.isUndefined(g)&&null!=g){g.path.length;c.LinkList=[],angular.forEach(g.path,function(a,d){if("Main"==a.self.name)c.LinkList.push({Text:b.MultiLingualRes.Home,Link:"Home.IndexPart1"});else{var e=a.self.name.split(".");e=e.splice(1,e.length-1);var f=e.join("_");"Home"!=f&&c.LinkList.push({Text:b.MultiLingualRes[f],Link:e.join(".")})}})}c.pagetitle=angular.element(window.document)[0].title}var g={link:f,restrict:"E",replace:!0,templateUrl:"NavBar.html"};return g};b.$inject=a,angular.module("MainModule").directive("navbar",b)}(),function(){"use strict";var a=["$sessionStorage","$filter","$location","FunMgtSerClient","WCFAuthInfoVM","WCFReturnResult","WCFErrorContract","$compile","$templateCache"],b=function(a,b,c,d,e,f,g,h,i){
function j(d,e,f,g){var h=b("orderBy"),i=b("filter");angular.isUndefined(a.MultiLingualRes)||null==a.MultiLingualRes||(d.orglist={},d.orglist.Captions={},d.orglist.Captions.First=a.MultiLingualRes.First,d.orglist.Captions.Prev=a.MultiLingualRes.Prev,d.orglist.Captions.Next=a.MultiLingualRes.Next,d.orglist.Captions.Last=a.MultiLingualRes.Last,d.orglist.Captions.OrgSettings=a.MultiLingualRes.OrgSettings,d.orglist.Captions.OrganizationKey=a.MultiLingualRes.OrganizationKey,d.orglist.Captions.OrgDetailsKey=a.MultiLingualRes.OrgDetailsKey,d.orglist.Captions.Operation=a.MultiLingualRes.Operation,d.orglist.Captions.Edit=a.MultiLingualRes.Edit,d.orglist.Captions.Delete=a.MultiLingualRes.Delete,d.orglist.Captions.Add=a.MultiLingualRes.Add,d.orglist.Captions.Save=a.MultiLingualRes.Save,d.orglist.Captions.E019=a.MultiLingualRes.E019,d.orglist.Captions.SearchCriteria=a.MultiLingualRes.SearchCriteria),d.TotalCount=angular.isUndefined(d.orgdetaillist)||null==d.orgdetaillist?0:d.orgdetaillist.length,d.CurrPageIndex=d.CurrPageIndex?d.CurrPageIndex:1,d.Sort=d.Sort?d.Sort:"OrganizationKey",d.SortDir=d.SortDir?d.SortDir:"asc",d.reverse="desc"==d.SortDir,d.isEditMode=angular.isUndefined(d.isEditMode)||null==d.isEditMode?!1:d.isEditMode,d.Search=function(){d.OrgSelList=h(d.orgsettinglist,d.Sort,d.reverse),d.OrgSelList=i(d.OrgSelList,{Org_Key:d.FilterOrganizationKey}),d.OrgSelList=i(d.OrgSelList,{OrgDetail_Key:d.FilterOrgDetailsKey}),d.TotalCount=d.OrgSelList.length,d.OrgSelList=d.OrgSelList.slice(d.pagesize*(d.CurrPageIndex-1),d.pagesize*d.CurrPageIndex)},d.SortBy=function(a){d.reverse=!0,d.Sort==a?(d.SortDir="desc"==d.SortDir?"asc":"desc",d.reverse="desc"==d.SortDir):(d.Sort=a,d.SortDir="asc",d.reverse=!1),d.OrgSelList=h(d.orgsettinglist,d.Sort,d.reverse),d.OrgSelList=i(d.OrgSelList,{Org_Key:d.FilterOrganizationKey}),d.OrgSelList=i(d.OrgSelList,{OrgDetail_Key:d.FilterOrgDetailsKey}),d.TotalCount=d.OrgSelList.length,d.OrgSelList=d.OrgSelList.slice(d.pagesize*(d.CurrPageIndex-1),d.pagesize*d.CurrPageIndex)},d.SelectOrgDetail=function(a){d.isEditMode=!0,angular.forEach(d.orgsettinglist,function(b,c){b.Org_ID==a.Org_ID&&b.OrgDetail_ID==a.OrgDetail_ID&&(d.SelSettingInfo=b,d.SelectedOrg=a.Org_ID,d.SelectedOrgDetailKey=a.OrgDetail_ID,d.EditIndex=c)})},d.DelOrgDetail=function(a){angular.forEach(d.orgsettinglist,function(b,c){b.Org_ID==a.Org_ID&&b.OrgDetail_ID==a.OrgDetail_ID&&d.orgsettinglist.splice(c,1)}),d.PageIndexChange(1)},d.AddOrgDetail=function(){var b=!0;angular.forEach(d.orgsettinglist,function(a,c){a.Org_ID==d.SelectedOrg&&a.OrgDetail_ID==d.SelectedOrgDetailKey&&(b=!1)});var e={};angular.forEach(d.orgslist,function(a,b){return d.SelectedOrg==a.ID?void(e=a):void 0});var f={};if(angular.forEach(d.orgdetaillist,function(a,b){return d.SelectedOrgDetailKey==a.ID?void(f=a):void 0}),d.SelSettingInfo={Org_ID:e.ID,Org_Path:e.OrganizationPath,Org_Key:e.OrganizationKey,Org_Name:e.OrganizationName,Org_AllowEdit:e.AllowEdit,Org_AllowDel:e.AllowDel,OrgDetail_ID:f.ID,OrgDetail_Key:f.OrgDetailsKey,OrgDetail_Type:f.OrgDetailsType,OrgDetail_TypeName:f.OrgDetailsTypeName,OrgDetail_AllowEdit:f.AllowEdit,OrgDetail_AllowDel:f.AllowDel},!b){var g=a.MultiLingualRes.E002.replace("{0}",d.SelSettingInfo.Org_Name+" and "+d.SelSettingInfo.OrgDetail_Key);throw d.SelSettingInfo={},d.SelectedOrg="",d.SelectedOrgDetailKey="",new ExcetionInst(ExceptionType.ValidationError,c.path(),d.msgboxtitle,g)}d.orgsettinglist.push(d.SelSettingInfo),d.PageIndexChange(1),d.SelSettingInfo={},d.SelectedOrg="",d.SelectedOrgDetailKey=""},d.EditOrgDetail=function(){var b=!0;angular.forEach(d.orgsettinglist,function(a,c){a.Org_ID==d.SelectedOrg&&a.OrgDetail_ID==d.SelectedOrgDetailKey&&d.EditIndex!=c&&(b=!1)});var e={};angular.forEach(d.orgslist,function(a,b){return d.SelectedOrg==a.ID?void(e=a):void 0});var f={};if(angular.forEach(d.orgdetaillist,function(a,b){return d.SelectedOrgDetailKey==a.ID?void(f=a):void 0}),d.SelSettingInfo={Org_ID:e.ID,Org_Path:e.OrganizationPath,Org_Key:e.OrganizationKey,Org_Name:e.OrganizationName,Org_AllowEdit:e.AllowEdit,Org_AllowDel:e.AllowDel,OrgDetail_ID:f.ID,OrgDetail_Key:f.OrgDetailsKey,OrgDetail_Type:f.OrgDetailsType,OrgDetail_TypeName:f.OrgDetailsTypeName,OrgDetail_AllowEdit:f.AllowEdit,OrgDetail_AllowDel:f.AllowDel},!b){var g=a.MultiLingualRes.E002.replace("{0}",d.SelSettingInfo.Org_Name+" and "+d.SelSettingInfo.OrgDetail_Key);throw d.SelSettingInfo={},d.SelectedOrg="",d.SelectedOrgDetailKey="",d.isEditMode=!1,new ExcetionInst(ExceptionType.ValidationError,c.path(),d.msgboxtitle,g)}d.orgsettinglist[d.EditIndex]=d.SelSettingInfo,d.PageIndexChange(1),d.SelSettingInfo={},d.SelectedOrg="",d.SelectedOrgDetailKey="",d.isEditMode=!1},d.PageIndexChange=function(a){d.orgsettinglist.length>0?(d.OrgSelList=h(d.orgsettinglist,d.Sort,d.reverse),d.OrgSelList=i(d.OrgSelList,{Org_Key:d.FilterOrganizationKey}),d.OrgSelList=i(d.OrgSelList,{OrgDetail_Key:d.FilterOrgDetailsKey}),d.CurrPageIndex=a,d.TotalCount=d.OrgSelList.length,d.OrgSelList=d.OrgSelList.slice(d.pagesize*(d.CurrPageIndex-1),d.pagesize*d.CurrPageIndex)):(d.OrgSelList=[],d.CurrPageIndex=a,d.TotalCount=d.OrgSelList.length)},d.orgdetaillist.length>0&&d.PageIndexChange(1)}var k={link:j,restrict:"E",replace:!0,scope:{orgsettinglist:"=",orgslist:"=",orgdetaillist:"=",funslist:"=",displaypagenum:"=",pagesize:"=",msgboxtitle:"="},templateUrl:"OrgList.html"};return k};b.$inject=a,angular.module("MainModule").directive("orglistdirective",b)}(),function(){"use strict";var a=["$compile","$templateCache","$sessionStorage"],b=function(a,b,c){function d(a,b,c,d){var e=[],f=0;if(a>0){f=a%b>0?parseInt(a/b)+1:parseInt(a/b),d>f&&(d=f);for(var g=parseInt((d-1)/2),h=d-1-g,i=0,j=0,k=0;g>k;++k)1>c-g+k?j++:i++;for(var k=0;h>k;++k)c+h-k>f?i++:j++;for(var k=i;k>0;--k)e.push(c-k);e.push(c);for(var k=1;j>=k;++k)e.push(c+k);c-1!=0?e.splice(0,0,c-1):e.splice(0,0,c),c+1>f?e.push(c):e.push(c+1)}return{Pages:e,TotalPage:f}}function e(a,b,e,f){a.$watchGroup(["totalcount","currpageindex"],function(){if(!angular.isUndefined(a.totalcount)&&null!=a.totalcount){var b=d(a.totalcount,a.pagesize,a.currpageindex,a.displaypagenum);if(a.pagingBar={},a.pagingBar.Caption={First:"First",Prev:"Prev",Next:"Next",Last:"Last"},angular.isUndefined(c.MultiLingualRes)||null==c.MultiLingualRes||(a.pagingBar.Caption.First=c.MultiLingualRes.First,a.pagingBar.Caption.Prev=c.MultiLingualRes.Prev,a.pagingBar.Caption.Next=c.MultiLingualRes.Next,a.pagingBar.Caption.Last=c.MultiLingualRes.Last),a.pagingBar.Items=[],a.totalcount>0){var e={PageIndex:1,Name:a.pagingBar.Caption.First,IsFirst:!0,Disabled:1==a.currpageindex};a.pagingBar.Items.push(e);for(var f=0;f<b.Pages.length;++f)if(0==f){var e={PageIndex:b.Pages[f],Name:a.pagingBar.Caption.Prev,IsPre:!0,Disabled:1==a.currpageindex};a.pagingBar.Items.push(e)}else if(f==b.Pages.length-1){var e={PageIndex:b.Pages[f],Name:a.pagingBar.Caption.Next,IsNext:!0,Disabled:a.currpageindex==b.TotalPage};a.pagingBar.Items.push(e)}else{var e={PageIndex:b.Pages[f],Name:b.Pages[f],IsCurrPage:b.Pages[f]==a.currpageindex,IsPages:!0};a.pagingBar.Items.push(e)}var e={PageIndex:b.TotalPage,Name:a.pagingBar.Caption.Last,IsLast:!0,Disabled:a.currpageindex==b.TotalPage};a.pagingBar.Items.push(e)}a.PageChange=function(b){a.$parent.PageIndexChange(b)}}})}var f={link:e,restrict:"E",replace:!0,scope:{currpageindex:"=",totalcount:"=",displaypagenum:"=",pagesize:"="},templateUrl:"PagingBar.html"};return f};b.$inject=a,angular.module("MainModule").directive("pagingbar",b)}(),function(){"use strict";var a=["$sessionStorage"],b=function(a){function b(b,c,d,e){e.$parsers.unshift(function(a){var d=!(""==a);return e.$setValidity("requriedValidate",d),d?angular.element(c).parent().children("span[reqVal]").remove():angular.element(c).parent().append('<span class="help-block" style="height: 10px; padding-bottom: 0px; margin-top: 8px; margin-bottom: 3px; border-bottom-width: 0px;" reqVal>'+b.ErrMsg()+"</span>"),d?a:void 0}),e.$formatters.unshift(function(a){var d=!(""==a)||e.$pristine;return e.$setValidity("requriedValidate",d),d?angular.element(c).parent().children("span[reqVal]").remove():angular.element(c).parent().append('<span class="help-block" style="height: 10px; padding-bottom: 0px; margin-top: 8px; margin-bottom: 3px; border-bottom-width: 0px;" reqVal>'+b.ErrMsg()+"</span>"),a}),b.ErrMsg=function(){var c=b.Caption;return angular.isUndefined(a.MultiLingualRes)||angular.isUndefined(a.MultiLingualRes.E001)||(c=a.MultiLingualRes.E001,c=c.replace(/\{0\}/g,b.Caption)),c}}var c={require:"ngModel",link:b,restrict:"A",scope:{Caption:"@fieldcaption"}};return c};b.$inject=a,angular.module("ValidationModule").directive("requriedValidate",b)}(),function(){"use strict";var a=["$sessionStorage","$filter","$location","RoleMgtSerClient","WCFAuthInfoVM","WCFReturnResult","WCFErrorContract","$compile","$templateCache"],b=function(a,b,c,d,e,f,g,h,i){function j(d,f,g,h){var i=b("orderBy"),j=b("filter");angular.isUndefined(a.MultiLingualRes)||null==a.MultiLingualRes||(d.rolelist={},d.rolelist.Captions={},d.rolelist.Captions.First=a.MultiLingualRes.First,d.rolelist.Captions.Prev=a.MultiLingualRes.Prev,d.rolelist.Captions.Next=a.MultiLingualRes.Next,d.rolelist.Captions.Last=a.MultiLingualRes.Last,d.rolelist.Captions.RoleSettings=a.MultiLingualRes.RoleSettings,d.rolelist.Captions.RoleName=a.MultiLingualRes.RoleName,d.rolelist.Captions.Operation=a.MultiLingualRes.Operation,d.rolelist.Captions.Edit=a.MultiLingualRes.Edit,d.rolelist.Captions.Delete=a.MultiLingualRes.Delete,d.rolelist.Captions.Add=a.MultiLingualRes.Add,d.rolelist.Captions.Save=a.MultiLingualRes.Save,d.rolelist.Captions.E019=a.MultiLingualRes.E019,d.rolelist.Captions.SearchCriteria=a.MultiLingualRes.SearchCriteria),d.TotalCount=angular.isUndefined(d.speroledetaillist)||null==d.speroledetaillist?0:d.speroledetaillist.length,d.CurrPageIndex=d.CurrPageIndex?d.CurrPageIndex:1,d.Sort=d.Sort?d.Sort:"RoleName",d.SortDir=d.SortDir?d.SortDir:"asc",d.reverse="desc"==d.SortDir,d.isEditMode=angular.isUndefined(d.isEditMode)||null==d.isEditMode?!1:d.isEditMode,d.Search=function(){d.RoleSelList=i(d.speroledetaillist,d.Sort,d.reverse),d.RoleSelList=j(d.RoleSelList,{RoleName:d.FilterRoleName}),d.TotalCount=d.RoleSelList.length,d.RoleSelList=d.RoleSelList.slice(d.pagesize*(d.CurrPageIndex-1),d.pagesize*d.CurrPageIndex)},d.SortBy=function(a){d.reverse=!0,d.Sort==a?(d.SortDir="desc"==d.SortDir?"asc":"desc",d.reverse="desc"==d.SortDir):(d.Sort=a,d.SortDir="asc",d.reverse=!1),d.RoleSelList=i(d.speroledetaillist,d.Sort,d.reverse),d.RoleSelList=j(d.RoleSelList,{RoleName:d.FilterRoleName}),d.TotalCount=d.RoleSelList.length,d.RoleSelList=d.RoleSelList.slice(d.pagesize*(d.CurrPageIndex-1),d.pagesize*d.CurrPageIndex)},d.SelectRoleDetail=function(a){d.isEditMode=!0,angular.forEach(d.speroledetaillist,function(b,c){b.ID==a&&(d.SelRoleDetailInfo=b,d.SelectedRole=a,d.EditIndex=c)})},d.DelRoleDetail=function(a){angular.forEach(d.speroledetaillist,function(b,c){b.ID==a&&d.speroledetaillist.splice(c,1)}),d.PageIndexChange(1)},d.AddRoleDetail=function(){var b=!0,e="";if(angular.forEach(d.speroledetaillist,function(a,c){a.ID==d.SelectedRole&&(e=a.RoleName,b=!1)}),!b){var f=a.MultiLingualRes.E002.replace("{0}",e);throw d.SelRoleDetailInfo={},d.SelectedRole="",new ExcetionInst(ExceptionType.ValidationError,c.path(),d.msgboxtitle,f)}angular.forEach(d.roleslist,function(a,b){return a.ID==d.SelectedRole?void(d.SelRoleDetailInfo=a):void 0}),d.speroledetaillist.push(d.SelRoleDetailInfo),d.PageIndexChange(1),d.SelRoleDetailInfo={},d.SelectedRole=""},d.EditRoleDetail=function(){var b=!0;if(angular.forEach(d.speroledetaillist,function(a,c){a.ID==d.SelectedRole&&d.EditIndex!=c&&(b=!1)}),!b){var e=a.MultiLingualRes.E002.replace("{0}",d.SelRoleDetailInfo.RoleName);throw d.SelRoleDetailInfo={},d.SelectedRole="",d.isEditMode=!1,new ExcetionInst(ExceptionType.ValidationError,c.path(),d.msgboxtitle,e)}angular.forEach(d.roleslist,function(a,b){return a.ID==d.SelectedRole?void(d.SelRoleDetailInfo=a):void 0}),d.speroledetaillist[d.EditIndex]=d.SelRoleDetailInfo,d.PageIndexChange(1),d.SelRoleDetailInfo={},d.SelectedRole="",d.isEditMode=!1},d.SelectRole=function(a){var b=new e;b.initData()},d.PageIndexChange=function(a){d.speroledetaillist.length>0?(d.RoleSelList=i(d.speroledetaillist,d.Sort,d.reverse),d.RoleSelList=j(d.RoleSelList,{RoleName:d.FilterRoleName}),d.CurrPageIndex=a,d.TotalCount=d.RoleSelList.length,d.RoleSelList=d.RoleSelList.slice(d.pagesize*(d.CurrPageIndex-1),d.pagesize*d.CurrPageIndex)):(d.RoleSelList=[],d.CurrPageIndex=a,d.TotalCount=d.RoleSelList.length)},d.speroledetaillist.length>0&&d.PageIndexChange(1)}var k={link:j,restrict:"E",replace:!0,scope:{speroledetaillist:"=",roleslist:"=",displaypagenum:"=",pagesize:"=",msgboxtitle:"="},templateUrl:"RoleList.html"};return k};b.$inject=a,angular.module("MainModule").directive("rolelistdirective",b)}(),function(){"use strict";var a=["$http"],b=function(a){var b={};this.GetListWithPaging=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"AuditLogMgtService.svc/GetListWithPaging",data:b});return c},this.GetEmptyAuditLogVM=function(c){var d=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"AuditLogMgtService.svc/GetEmptyAuditLogVM",data:c});return d.then(function(a){b=a.data})},this.GetEmptyAuditLogVM_Result=function(){return b}};b.$inject=a,angular.module("WCFClient").service("AuditLogMgtSerClient",b)}(),function(){"use strict";var a=["$http"],b=function(a){var b={};this.GetListWithPaging=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"AuthHisService.svc/GetListWithPaging",data:b});return c},this.Delete=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"AuthHisService.svc/Delete",data:b});return c},this.GetEmptyAuthHisVM=function(c){var d=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"AuthHisService.svc/GetEmptyAuthHisVM",data:c});return d.then(function(a){b=a.data})},this.GetEmptyAuthHisVM_Result=function(){return b}};b.$inject=a,angular.module("WCFClient").service("AuthHisSerClient",b)}(),function(){"use strict";var a=["$http"],b=function(a){this.CheckPrivilege=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"CheckPrivilegeService.svc/CheckPrivilege",data:b});return c},this.CheckPrivilegeWithLUserID=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"CheckPrivilegeService.svc/CheckPrivilegeWithLUserID",data:b});return c}};b.$inject=a,angular.module("WCFClient").service("CheckPrivilegeSerClient",b)}(),function(){"use strict";var a=["$http"],b=function(a){var b={},c={},d={},e={};this.GetAllFunWFunType=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"FunMgtService.svc/GetAllFunWFunType",data:b});return c},this.GetMenuByAuthInfo=function(c){var d=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"FunMgtService.svc/GetMenuByAuthInfo",data:c});return d.then(function(a){b=a.data})},this.GetMenuByAuthInfo_Result=function(){return b},this.GetListWithPaging=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"FunMgtService.svc/GetListWithPaging",data:b});return c},this.GetEntityByID=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"FunMgtService.svc/GetEntityByID",data:b});return c.then(function(a){d=a.data})},this.GetEntityByID_Result=function(){return d},this.Create=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"FunMgtService.svc/Create",data:b});return c},this.Delete=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"FunMgtService.svc/Delete",data:b});return c},this.Update=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"FunMgtService.svc/Update",data:b});return c},this.GetAll=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"FunMgtService.svc/GetAll",data:b});return c.then(function(a){e=a.data})},this.GetAll_Result=function(){return e},this.GetParentFunctions=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"FunMgtService.svc/GetParentFunctions",data:b});return c},this.GetFunDetailInfo_FID=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"FunMgtService.svc/GetFunDetailInfo_FID",data:b});return c},this.GetEmptyFVM=function(b){var d=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"FunMgtService.svc/GetEmptyFVM",data:b});return d.then(function(a){c=a.data})},this.GetEmptyFVM_Result=function(){return c}};b.$inject=a,angular.module("WCFClient").service("FunMgtSerClient",b)}(),function(){"use strict";var a=["$http"],b=function(a){var b={},c={},d={};this.GetListWithPaging=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"FunTypeMgtService.svc/GetListWithPaging",data:b});return c},this.GetEntityByID=function(c){var d=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"FunTypeMgtService.svc/GetEntityByID",data:c});return d.then(function(a){b=a.data})},this.GetEntityByID_Result=function(){return b},this.Create=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"FunTypeMgtService.svc/Create",data:b});return c},this.Delete=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"FunTypeMgtService.svc/Delete",data:b});return c},this.Update=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"FunTypeMgtService.svc/Update",data:b});return c},this.GetAllFunType=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"FunTypeMgtService.svc/GetAllFunType",data:b});return c.then(function(a){d=a.data})},this.GetAllFunType_Result=function(){return d},this.GetEmptyFTVM=function(b){var d=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"FunTypeMgtService.svc/GetEmptyFTVM",data:b});return d.then(function(a){c=a.data})},this.GetEmptyFTVM_Result=function(){return c}};b.$inject=a,angular.module("WCFClient").service("FunTypeMgtSerClient",b)}(),function(){"use strict";var a=["$http"],b=function(a){var b={},c={},d={},e={};this.Login=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"LoginUserMgtService.svc/login",data:b});return c},this.ResetPwd=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"LoginUserMgtService.svc/ResetPwd",data:b});return c},this.GetEmptyLoginUserVM=function(){var b=a({method:"GET",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"LoginUserMgtService.svc/GetEmptyLoginUserVM",data:{}});return b.then(function(a){c=a.data})},this.GetEmptyLoginUserVM_Result=function(){return c},this.GetEntityByID=function(c){var d=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"LoginUserMgtService.svc/GetEntityByID",data:c});return d.then(function(a){b=a.data})},this.GetEntityByID_Result=function(){return b},this.Logout=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"LoginUserMgtService.svc/Logout",data:b});return c},this.GetListWithPaging=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"LoginUserMgtService.svc/GetListWithPaging",data:b});return c},this.GetEntityByIDWDetails=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"LoginUserMgtService.svc/GetEntityByIDWDetails",data:b});return c.then(function(a){d=a.data})},this.GetEntityByIDWDetails_Result=function(){return d},this.Create=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"LoginUserMgtService.svc/Create",data:b});return c},this.Delete=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"LoginUserMgtService.svc/Delete",data:b});return c},this.Update=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"LoginUserMgtService.svc/Update",data:b});return c},this.GetAuthInfo=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"LoginUserMgtService.svc/GetAuthInfo",data:b});return c.then(function(a){e=a.data})},this.GetAuthInfo_Result=function(){return e},this.GetLUIDList=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"LoginUserMgtService.svc/GetLUIDList",data:b});return c},this.GetOrgIDList=function(a,b,c,d){var e={};angular.isUndefined(a)||null==a||angular.forEach(a.EntityList_FDInfo,function(a,c){return a.FKey==b?void(e=a):void 0});var f=[],g=[],h=[];if(null!=e&&e.FTName.indexOf(c)>-1)if(e.OrgPath.length>0){var i=e.FTName.indexOf(c);if(e.FDSelected[i]){g.push(e.OrgPath[i].Value[0]);var j=[];angular.forEach(d,function(a,b){angular.forEach(g,function(b,c){0==a.OrganizationPath.indexOf(b)&&a.OrganizationPath!=b&&j.push(a)})}),angular.forEach(j,function(a,b){f.push(a.ID)})}}else angular.forEach(d,function(a,b){f.push(a.ID)});return angular.forEach(d,function(a,b){angular.forEach(f,function(b,c){b==a.ID&&h.push(a)})}),h}};b.$inject=a,angular.module("WCFClient").service("LoginUserMgtSer",b)}(),function(){"use strict";var a=["$http"],b=function(a){var b={},c={},d={},e={},f={};this.GetListWithPaging=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"OrgDetailMgtService.svc/GetListWithPaging",data:b});return c},this.GetEntityByID=function(b){var d=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"OrgDetailMgtService.svc/GetEntityByID",data:b});return d.then(function(a){c=a.data})},this.GetEntityByID_Result=function(){return c},this.Create=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"OrgDetailMgtService.svc/Create",data:b});return c},this.Delete=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"OrgDetailMgtService.svc/Delete",data:b});return c},this.Update=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"OrgDetailMgtService.svc/Update",data:b});return c},this.GetAll=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"OrgDetailMgtService.svc/GetAll",data:b});return c.then(function(a){f=a.data})},this.GetAll_Result=function(){return f},this.GetRoleSettingsByOrgDID=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"OrgDetailMgtService.svc/GetRoleSettingsByOrgDID",data:b});return c.then(function(a){e=a.data})},this.GetRoleSettingsByOrgDID_Result=function(){return e},this.GetPrivilegeByUserID=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"OrgDetailMgtService.svc/GetPrivilegeByUserID",data:b});return c.then(function(a){d=a.data},function(a){d=a.data})},this.GetPrivilegeByUserID_Result=function(){return d},this.GetEmptyOrgDetailVM=function(c){var d=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"OrgDetailMgtService.svc/GetEmptyOrgDetailVM",data:c});return d.then(function(a){b=a.data})},this.GetEmptyOrgDetailVM_Result=function(){return b}};b.$inject=a,angular.module("WCFClient").service("OrgDetailMgtSerClient",b)}(),function(){"use strict";var a=["$http"],b=function(a){var b={},c={},d={};this.GetAll=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"OrgMgtService.svc/GetAll",data:b});return c.then(function(a){d=a.data})},this.GetAll_Result=function(){return d},this.GetEntityListByIDList_LUserAccessByOrgVM=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"OrgMgtService.svc/GetEntityListByIDList_LUserAccessByOrgVM",data:b});return c},this.GetListWithPaging=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"OrgMgtService.svc/GetListWithPaging",data:b});return c},this.GetEntityByID=function(b){var d=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"OrgMgtService.svc/GetEntityByID",data:b});return d.then(function(a){c=a.data})},this.GetEntityByID_Result=function(){return c},this.Create=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"OrgMgtService.svc/Create",data:b});return c},this.Delete=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"OrgMgtService.svc/Delete",data:b});return c},this.Update=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"OrgMgtService.svc/Update",data:b});return c},this.GetEmptyOrgVM=function(c){var d=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"OrgMgtService.svc/GetEmptyOrgVM",data:c});return d.then(function(a){b=a.data})},this.GetEmptyOrgVM_Result=function(){return b},this.GetOrgPathListByLUID=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"OrgMgtService.svc/GetOrgPathListByLUID",data:b});return c}};b.$inject=a,angular.module("WCFClient").service("OrgMgtSerClient",b)}(),function(){"use strict";var a=["$http"],b=function(a){var b={},c={},d={};this.GetAll=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"RoleMgtService.svc/GetAll",data:b});return c.then(function(a){d=a.data})},this.GetAll_Result=function(){return d},this.GetEntityListByIDList=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"RoleMgtService.svc/GetEntityListByIDList",data:b});return c},this.GetListWithPaging=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"RoleMgtService.svc/GetListWithPaging",data:b});return c},this.GetEntityByID=function(b){var d=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"RoleMgtService.svc/GetEntityByID",data:b});return d.then(function(a){c=a.data})},this.GetEntityByID_Result=function(){return c},this.Create=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"RoleMgtService.svc/Create",data:b});return c},this.Delete=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"RoleMgtService.svc/Delete",data:b});return c},this.Update=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"RoleMgtService.svc/Update",data:b});return c},this.GetEmptyRoleVM=function(c){var d=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"RoleMgtService.svc/GetEmptyRoleVM",data:c});return d.then(function(a){b=a.data})},this.GetEmptyRoleVM_Result=function(){return b}};b.$inject=a,angular.module("WCFClient").service("RoleMgtSerClient",b)}(),function(){"use strict";var a=["$http"],b=function(a){this.GetMultiLingualResSer=function(b){var c=a({method:"GET",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"SystemMgtService.svc/GetMultiLingualResSer/"+(""!=b?b:"en"),data:{}});return c},this.GetSystemInfo=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"SystemMgtService.svc/GetSystemInfo",data:b});return c},this.Update=function(b){var c=a({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"SystemMgtService.svc/Update",data:b});return c}};b.$inject=a,angular.module("WCFClient").service("SystemInfoRestfulSer",b)}(),function(){"use strict";var a=[],b=function(){function a(a){a&&this.setData(a)}return a.prototype={setData:function(a){angular.extend(this,a)},HasError:function(){var a=this;return!a.IsSuccess},PwdExpire:function(){var a=this;return a.IsPWDExpire},GetErrMsgs:function(){var a="";return!angular.isUndefined(this.StrList_Error)&&this.StrList_Error.length>0&&(a=this.StrList_Error.join("<br/>")),a}},a};b.$inject=a,angular.module("CoolPrivilegeModel").factory("LUSerLoginResult",b)}(),function(){"use strict";var a=[],b=function(){function a(a){a&&this.setData(a)}return a.prototype={setData:function(a){angular.extend(this,a)}},a};b.$inject=a,angular.module("CoolPrivilegeModel").factory("LoginUserModel",b)}(),function(){"use strict";var a=[],b=function(){function a(a){a&&this.setData(a),this.LoadingDialog=new BootstrapDialog({type:BootstrapDialog.TYPE_INFO,message:'<div style="text-align:center;"><i class="fa fa-refresh fa-spin fa-3x" style="-webkit-animation: spin 1000ms infinite linear;animation: spin 1000ms infinite linear;"></i></div>',closable:!1}),this.IsTablet=!1,this.IsMobi=!1}return a.prototype={setData:function(a){angular.extend(this,a)},OpenLoadingDialog:function(){this.LoadingDialog.realize(),this.LoadingDialog.getModalHeader().hide(),this.LoadingDialog.getModalFooter().hide(),this.LoadingDialog.open()},CloseLoadingDialog:function(){this.LoadingDialog.close()},ShowMsg:function(a,b,c){this.CheckWindowType(),this.IsMobi||this.IsTablet?BootstrapDialog.show({cssClass:"smallSize",type:a,title:b,message:c,closable:!1,buttons:[{label:"OK",action:function(a){a.close()}}]}):BootstrapDialog.show({type:a,title:b,message:c,closable:!1,buttons:[{label:"OK",action:function(a){a.close()}}]})},GetConfirmMsgBox:function(a,b,c,d){this.CheckWindowType();BootstrapDialog.SIZE_NORMAL;if(this.IsMobi||this.IsTablet)var e=new BootstrapDialog({cssClass:"smallSize",type:a,title:b,message:c,closable:!1,buttons:d||[{id:"OKbtn",label:"OK"}]});else var e=new BootstrapDialog({type:a,title:b,message:c,closable:!1,buttons:d||[{id:"OKbtn",label:"OK"}]});return e},CheckWindowType:function(){(window.navigator.userAgent.match(/Mobile/i)||window.navigator.userAgent.match(/iPhone/i)||window.navigator.userAgent.match(/iPod/i)||window.navigator.userAgent.match(/IEMobile/i)||window.navigator.userAgent.match(/Windows Phone/i)||window.navigator.userAgent.match(/Android/i)||window.navigator.userAgent.match(/BlackBerry/i)||window.navigator.userAgent.match(/webOS/i))&&(this.IsMobi=!0),(window.navigator.userAgent.match(/Tablet/i)||window.navigator.userAgent.match(/iPad/i)||window.navigator.userAgent.match(/Nexus 7/i)||window.navigator.userAgent.match(/Nexus 10/i)||window.navigator.userAgent.match(/KFAPWI/i))&&(this.IsMobi=!1,this.IsTablet=!0)}},a};b.$inject=a,angular.module("CoolPrivilegeModel").factory("MsgBoxModel",b)}();var defaultLangKey="en",Keys={SessionInfo_CookiesKey:"SessionInfo",SystemInfo_CookiesKey:"SystemInfo"},Path={AccControlLoginPath:"../../Views/Components/Login/",ErrorPath:"../../Views/Components/Error/",HomePath:"../../Views/Components/Home/",FunsPath:"../../Views/Components/Funs/",SamplePath:"../../Views/Components/Sample/",MainPath:"../../Views/Components/"},ExcetionInst=function(a,b,c,d,e){return{ExceptionType:a,Path:b,Msgs:d,PageTitle:c,TraceStack:e}},ExceptionType={
SessionTimeout:"SessionTimeout",AccessDenied:"AccessDenied",PageNotFound:"PageNotFound",ValidationError:"ValidationError",RestServiceError:"RestServiceError",Others:"Others"},RoleType={LoginUser:0,Role:1,Organization:2},WCFPath="http://localhost:7282/";!function(){"use strict";var a=[],b=function(){var a={},b=function(){};return b.prototype={SetExceptionData:function(b){a=b},GetExceptionData:function(){return a}},b};b.$inject=a,angular.module("CoolPrivilegeModel").factory("ShareDataModel",b)}(),function(){"use strict";var a=[],b=function(){function a(){}return a};b.$inject=a,angular.module("CoolPrivilegeModel").factory("StaticContentModel",b)}(),function(){"use strict";var a=[],b=function(){function a(a){a&&this.setData(a)}return a.prototype={setData:function(a){angular.extend(this,a)}},a};b.$inject=a,angular.module("CoolPrivilegeModel").factory("SystemInfoVM",b)}(),function(){"use strict";var a=[],b=function(){function a(a){a&&this.setData(a)}return a.prototype={setData:function(a){angular.extend(this,a)}},a};b.$inject=a,angular.module("CoolPrivilegeModel").factory("WCFErrorContract",b)}(),function(){"use strict";var a=[],b=function(){function a(a){a&&this.setData(a)}return a.prototype={setData:function(a){angular.extend(this,a)},HasError:function(){var a=this;return!a.IsSuccess},GetErrMsgs:function(){var a="";return!angular.isUndefined(this.StrList_Error)&&this.StrList_Error.length>0&&(a=this.StrList_Error.join("<br/>")),a},HasMsgs:function(){return!angular.isUndefined(this.StrList_Error)&&this.StrList_Error.length>0}},a};b.$inject=a,angular.module("CoolPrivilegeModel").factory("WCFReturnResult",b)}(),function(){var a=["$cookies","$location","$rootScope"],b=function(a,b,c){function d(){this.SessionInfo={},this.SystemInfo={},this.PageTitle="",this.MsgsStr=""}return d.prototype={SetUserInfo:function(b){var c=600;if(this.SystemInfo=a.getObject(Keys.SystemInfo_CookiesKey),!angular.isUndefined(this.SystemInfo)&&null!=this.SystemInfo){c=this.SystemInfo.SessionTimeoutSeconds,this.SessionInfo=b;var d=new Date;d.setSeconds(d.getSeconds()+c),a.putObject(Keys.SessionInfo_CookiesKey,b,{expires:d})}},GetUserInfo:function(){if(this.SessionInfo=a.getObject(Keys.SessionInfo_CookiesKey),angular.isUndefined(this.SessionInfo)||null==this.SessionInfo){var d=b.path();c.$emit(ExceptionType.SessionTimeout,{Path:d,PageTitle:this.PageTitle,Msgs:this.MsgsStr})}else this.SetUserInfo(this.SessionInfo);return this.SessionInfo},ClearUserInfo:function(){a.remove(Keys.SessionInfo_CookiesKey)},GetSystemInfo:function(){if(this.SystemInfo=a.getObject(Keys.SystemInfo_CookiesKey),angular.isUndefined(this.SystemInfo)||null==this.SystemInfo){var d=b.path();c.$emit(ExceptionType.SessionTimeout,{Path:d,PageTitle:this.PageTitle,Msgs:this.MsgsStr})}return this.SystemInfo}},d};b.$inject=a,angular.module("commonUtilities").factory("ClientSessionMgt",b)}(),function(){"use strict";var a=["$stateProvider"],b=function(a){return{AddState:function(b,c,d,e,f){var g="/"+(d?d:c);angular.isUndefined(f)||null==f||""==f||(g+=f),a.state("Main."+c+(d?"."+d:""),{url:g,views:{"Content@Main":{templateUrl:b+c+"/"+(d?c+"."+d:c)+".tpl.html",controller:c+"Controller"}},resolve:e})},ConfigState:function(){var b=angular.injector(["ng"]),c=b.get("$http"),d=c({method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},url:WCFPath+"FunMgtService.svc/GetAllFunWFunType",data:{}});d.then(function(b){if(null!=b&&!angular.isUndefined(b))for(var c=b.data,d=0;d<c.EntityList_FunDetailInfo.length;++d){var e=c.EntityList_FunDetailInfo[d];a.state("Main."+e.FName,{url:"/"+e.FName,views:{"Content@Main":{templateUrl:Path.FunsPath+e.FName+"/"+e.FName+".tpl.html",controller:e.FName+"Controller"}}});for(var f=0;f<e.FTName.length;++f)a.state("Main."+e.FName+(e.FTName[f]?"."+e.FTName[f]:""),{url:"/"+(e.FName?e.FName+"/"+e.FTName[f]:e.FName),views:{"Content@Main":{templateUrl:Path.FunsPath+e.FName+"/"+(e.FTName[f]?e.FName+"_"+e.FTName[f]:e.FName)+".tpl.html",controller:e.FName+"Controller"}}})}})},$get:function(){return{}}}};b.$inject=a,angular.module("commonUtilities").provider("CustomState",b)}(),function(){var a=function(a){function b(b,c){var d=a.get("$rootScope");!angular.isUndefined(b)&&null!=b&&angular.isObject(b)?angular.isUndefined(b.ExceptionType)?d.$emit(ExceptionType.Others,{Stack:b.stack,Msgs:b.message,Cause:c}):b.ExceptionType==ExceptionType.SessionTimeout?d.$emit(ExceptionType.SessionTimeout,{Path:b.Path,PageTitle:b.PageTitle,Msgs:b.Msgs}):b.ExceptionType==ExceptionType.AccessDenied?d.$emit(ExceptionType.AccessDenied,{Path:b.Path,PageTitle:b.PageTitle,Msgs:b.Msgs}):b.ExceptionType==ExceptionType.ValidationError?d.$emit(ExceptionType.ValidationError,{Path:b.Path,PageTitle:b.PageTitle,Msgs:b.Msgs}):b.ExceptionType==ExceptionType.RestServiceError&&d.$emit(ExceptionType.RestServiceError,{Path:b.Path,PageTitle:b.PageTitle,Msgs:b.Msgs,Stack:b.TraceStack}):d.$emit(ExceptionType.Others,{Msgs:b,Cause:c})}return b};a.$inject=["$injector"],angular.module("commonUtilities").factory("$exceptionHandler",a)}(),function(){"use strict";var a=["$sessionStorage","$q","ClientSessionMgt"],b=function(a,b,c){function d(){this.WCFAuthorizedKey="",this.WCFClientSessionKey="",this.IpAddress="",this.ClientName="",this.RequestFunKey="",this.RequestFunTypeKey="",this.ClientLanguage=""}return d.prototype={initData:function(){angular.isUndefined(a.SelectedLang)||null==a.SelectedLang||""==a.SelectedLang||(this.ClientLanguage=a.SelectedLang);var b=new c,d=b.GetUserInfo();angular.isUndefined(d)||null==d||(this.WCFAuthorizedKey=d.WCFToken,this.LoginID=d.UserId)},GetUserId:function(){return this.LoginID},SetFunKeyAndTypeKey:function(a,b){this.RequestFunKey=a,this.RequestFunTypeKey=b}},d};b.$inject=a,angular.module("commonUtilities").factory("WCFAuthInfoVM",b)}();